/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET8 */
if(typeof(SiebelAppFacade.EditUIRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.EditUIRenderer");define("siebel/epuidetailrenderer",["siebel/phyrenderer"],function(){SiebelAppFacade.EditUIRenderer=(function(){var n=SiebelJS.Dependency("SiebelApp.Constants"),p=n.get("SWE_PST_BUTTON_CTRL"),j=n.get("SWE_CTRL_LINK"),i=n.get("SWE_PST_COL"),f=SiebelApp.S_App.REPCHK_MRV1();if(f){var e={}}function d(){SiebelAppFacade.EditUIRenderer.superclass.constructor.apply(this,arguments)}SiebelJS.Extend(d,SiebelAppFacade.PhysicalRenderer);d.prototype.Init=function(){SiebelAppFacade.EditUIRenderer.superclass.Init.call(this);this.AttachPMBinding("ShowSelection",this.ShowSelectionCustom);this.AttachPMBinding("UpdateUI",function(){this.ShowSelectionCustom()})};d.prototype.EndLife=function(){$("#"+this.GetPM().Get("placeholder")).find(".jstree").jstree("destroy");SiebelAppFacade.EditUIRenderer.superclass.EndLife.call(this)};d.prototype.ShowUI=function(){var w=this.GetPM(),y="#s_"+w.Get("GetFullId")+"_div",v=$(y).find('div[id="EPUIRecordTemplate"]').html(),x=$(y).find('div[id="EPUIRecordTemplate"]').empty(),t=w.Get("GetRowListRowCount"),z="",u;for(u=0;u<t;u++){z=z+'<div myRecordIndex="'+u+'" data-role="EPUIRec" class="siebui-epui-tr" >'+v+"</div>"}colsolidatedJQObj=$(z);x.replaceWith(colsolidatedJQObj);SiebelAppFacade.EditUIRenderer.superclass.ShowUI.call(this)};function k(w,u){var v=w.GetMethodPropSet(),t=v.Clone();t.SetProperty(n.get("SWE_REQ_ROW_ID_STR"),"1");t.SetProperty(n.get("SWE_ROW_STR"),u);this.GetPM().OnControlEvent(n.get("PHYEVENT_INVOKE_CONTROL"),w.GetMethodName(),t)}function a(x){var v=$(this),u=v.attr("recordindex");if(f){var w=v.parents(".siebui-epui-accordion-header").length?v.parents(".siebui-epui-accordion-header"):v.parents(".siebui-epui-accordion-detail").prev(),t=w.attr("accordionheaderindex")}x.preventDefault();x.stopImmediatePropagation();if(f){l(t)}k.call(x.data.ctx,x.data.ctrl,u)}function g(w){var v=this.GetUIWrapper(w),t=v.Helper("EventHelper"),u=v.GetEl();switch(w.GetUIType()){case p:case j:t.Manage(u,"click",{ctx:this,ctrl:w},a);break}}function c(y){var w=$(this),v=y.data.ctx.GetPM(),x="#"+v.Get("GetFullId"),t=w.attr("myrecordindex"),u=(t||t===0)?t:w.find('[data-role="EPUIRec"]').attr("myrecordindex");$(x).find('[data-role="EPUIRec"]').removeClass("siebui-epui-rec-selected");if(w.attr("myrecordindex")){w.addClass("siebui-epui-rec-selected")}else{w.find('[data-role="EPUIRec"]').addClass("siebui-epui-rec-selected")}v.OnControlEvent(n.get("PHYEVENT_SELECT_ROW"),u)}if(f){function b(){var u=$(this);var t=u.attr("accordionheaderindex");if(e[t]){r.call(this,t);u.removeClass("siebui-epui-active-section").next(".siebui-epui-accordion-detail").removeClass("siebui-epui-active-section")}else{l.call(this,t);u.addClass("siebui-epui-active-section").next(".siebui-epui-accordion-detail").addClass("siebui-epui-active-section")}}function l(t){var u=$(this);u.addClass("siebui-epui-accordion-expanded").removeClass("siebui-epui-accordion-collapsed").next(".siebui-epui-accordion-detail").show();e[t]=true}function r(t){var u=$(this);u.addClass("siebui-epui-accordion-collapsed").removeClass("siebui-epui-accordion-expanded").next(".siebui-epui-accordion-detail").hide();e[t]=false}}function q(t){$(this).find('[name="EPUITitleRow"]').addClass("siebui-epui-title-selected");$(this).addClass("siebui-epui-selected")}function o(t){$(this).find('[name="EPUITitleRow"]').removeClass("siebui-epui-title-selected");$(this).removeClass("siebui-epui-selected")}if(f){function h(){var v=this.GetPM(),A=v.Get("GetRecordSet"),C=v.Get("GetBeginRow")||0,t=e.activeIndex?e.activeIndex:[],x=$('[data-role="EPUIRec"]'),u=Number(v.Get("GetRowListRowCount"))+Number(C),y;x.wrapAll('<div id="siebui-epui-accordionWrapper"></div>');for(var w=0,z=0;(w<u)&&(w<A.length);w++){recObj=x.filter('[myrecordindex="'+w+'"]');if(v.ExecuteMethod("IsRuleRow",w)){if(!recObj.parent().hasClass("siebui-epui-accordion-header")){var B=w-z;recObj.wrap('<div class="siebui-epui-accordion-header"></div>');recObj.parent().attr("accordionHeaderIndex",B).after('<div class="siebui-epui-accordion-detail"></div>')}}else{if(!recObj.parent().hasClass("siebui-epui-accordion-detail")){z+=1;recObj.prev(".siebui-epui-accordion-detail").append(recObj)}}}$(".siebui-epui-accordion-header").each(function(){var E=$(this),D=parseInt(E.attr("accordionHeaderIndex"));if(e[D]===undefined||e[D]===true){l.call(this,D)}else{r.call(this,D)}})}function s(){var t=$('[data-role="EPUIRec"]');if(t.parent().hasClass("siebui-epui-accordion-header")||t.parent().hasClass("siebui-epui-accordion-detail")){$('.siebui-epui-accordion-header > [data-role="EPUIRec"] ,.siebui-epui-accordion-detail > [data-role="EPUIRec"]').unwrap()}$('#siebui-epui-accordionWrapper > [data-role="EPUIRec"] ').unwrap()}}d.prototype.BindEvents=function(t){var w=this.GetPM(),x="#"+w.Get("GetFullId"),u=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper");t=t||this.GetPM().Get("GetControls");for(var z in t){if(t.hasOwnProperty(z)){var y=t[z];g.call(this,y)}}u.Manage($(x),"focusin",{ctx:this},c,'[data-role="EPUIRec"]');if(f){u.Manage($(x),"click",{ctx:this},c,[".siebui-epui-accordion-header",'[data-role="EPUIRec"]']);u.Manage($(x),"click",{ctx:this},b,".siebui-epui-accordion-header")}var v=$(x).parent().parent().filter('[name="EPUIIntegratedApplet"]');if($(v).length>0){u.Manage($('[name="EPUIIntegratedApplet"]'),"focusin",{ctx:this},q);u.Manage($('[name="EPUIIntegratedApplet"]'),"focusout",{ctx:this},o)}SiebelAppFacade.EditUIRenderer.superclass.BindEvents.call(this,t)};function m(){var w=this.GetPM(),x=w.Get("GetRecordSet"),t=w.Get("LastBoundData"),y=false;if(t.length!==x.length){y=true}else{for(var u=0;u<t.length;u++){for(var v in t[u]){if(t[u].hasOwnProperty(v)&&t[u][v]!==x[u][v]){this.ShowSelectionCustom.call(this,u);break}}}}w.SetProperty("LastBoundData",x);return y}d.prototype.BindData=function(z){if(this.inProgress){return false}if(z){var y=m.call(this);if(!y){return}}SiebelAppFacade.EditUIRenderer.superclass.BindData.call(this,z);var u=this.GetPM(),w=u.Get("GetRecordSet"),v=u.Get("GetBeginRow")||0,x=Number(this.GetPM().Get("GetRowListRowCount"))+Number(v);if(f){s.call(this)}$('[data-role="EPUIRec"]').show();for(var t=0;(t<x)&&(t<w.length);t++){this.ShowSelectionCustom.call(this,t)}$('[data-role="EPUIRec"]').slice(w.length).hide();u.SetProperty("LastBoundData",w);if(f){h.call(this)}};d.prototype.ShowSelectionCustom=function(v){if(this.inProgress){return false}var u=this.GetPM(),B=u.Get("GetControls");if(typeof(v)==="undefined"||isNaN(v)){v=u.Get("GetSelection")}var t=SiebelApp.S_App.GetDirection();this.ShowSelection.call(this,v);for(var x in B){if(B.hasOwnProperty(x)){var w=B[x];pwC=this.GetUIWrapper(w);element=pwC.GetEl(v);if(element){$(element).attr("recordindex",v)}if(u.ExecuteMethod("IsRowLevelControl",w.GetName())||w.GetControlType()===i){var A=u.ExecuteMethod("CanShowRowLevelControl",w.GetName(),v);pwC.SetState(n.get("SHOW"),A,v)}if(w.GetControlType()===i){var y=(!u.ExecuteMethod("IsControlReadOnly",x,v));
pwC.SetState(n.get("EDITABLE"),y,v)}}}var z=$('[data-role="EPUIRec"]').filter('[myrecordindex="'+v+'"]');z.find("[data-role]").each(function(D,E){var C=$(E).attr("data-role");if(!u.ExecuteMethod("CanShowRowLevelControl",C,v)){$(E).hide()}else{$(E).show()}})};return d}());return SiebelAppFacade.EditUIRenderer})};