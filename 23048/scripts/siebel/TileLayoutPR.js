/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET7 */
if(typeof(SiebelAppFacade.TileLayoutPR)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.TileLayoutPR");define("siebel/TileLayoutPR",["siebel/phyrenderer"],function(){SiebelAppFacade.TileLayoutPR=(function(){var m=SiebelJS.Dependency("SiebelApp.Utils");var g=SiebelJS.Dependency("SiebelApp.Constants");SCROLL_UP=consts.get("PAG_SCROLL_UP"),SCROLL_DN=consts.get("PAG_SCROLL_DN");var a="easeInOutQuad";var b=g.get("SWE_CTRL_MVG");var f=g.get("SWE_CTRL_PICK");function i(s){var w;this.init=true;this.SetBasicLayout=function(z){w=z};this.GetBasicLayout=function(){return w};var v;this.SetTileScrollDirection=function(z){v=z};this.GetTileScrollDirection=function(){return v};var x;this.SetContainer=function(z){x=z};this.GetContainer=function(){return x};var p;this.SetScrollAmount=function(z){p=z};this.GetScrollAmount=function(){return p};var q=0;this.SetTileHeight=function(z){q=z};this.GetTileHeight=function(){return q};var r=0;this.SetTileWidth=function(z){r=z};this.GetTileWidth=function(){return r};var u=0;this.SetContainerWidth=function(z){u=z};this.GetContainerWidth=function(){return u};var t=0;this.SetContainerHeight=function(z){t=z};this.GetContainerHeight=function(){return t};var y;this.SetIScrollObject=function(z){y=z};this.GetIScrollObject=function(z){return y};s.AddProperty("GetSelId",k);SiebelAppFacade.TileLayoutPR.superclass.constructor.call(this,s)}SiebelJS.Extend(i,SiebelAppFacade.PhysicalRenderer);i.prototype.Init=function(){SiebelAppFacade.TileLayoutPR.superclass.Init.call(this);this.AttachPMBinding("OnScrollComplete",d)};i.prototype.FocusFirstControl=function(){var r=this.GetPM(),x=r.Get("ListOfColumns"),y=x.length,p=9999;var u=null;var q=0;this.SetFirstControl(null);for(var s=0;s<y;s++){var t=x[s].control;var z=t.GetFieldName();if(!m.IsEmpty(z)){if(t.GetIndex()&&t.GetIndex()<p){var w=false;if(r.Get("IsInQueryMode")===false){w=r.ExecuteMethod("CanUpdate",t.GetName())}else{w=true}if(w&&!m.IsEmpty(t.GetUIType())&&(t.isBasicControl()||t.GetUIType()[0]==="J"||t.GetUIType()===b||t.GetUIType()===f)){var v=Number(r.Get("GetSelection"));this.SetFirstControl(this.GetUIWrapper(t).GetEl(v).eq(0));break}}}}if(this.GetFirstControl()!=null){this.GetFirstControl().focus();return}return false};i.prototype.ShowUI=function(q){this.init=true;var p=this.GetPM();var r=p.Get("GetFullId")+"_"+g.get("SWE_TILE_CONTAINER");this.SetContainer($("#"+r));this.SetBasicLayout(this.GetContainer().html());this.GetContainer().html('<div class="siebui-tile-list"></div>');SiebelAppFacade.TileLayoutPR.superclass.ShowUI.call(this);this.SetTileScrollDirection(SiebelApp.S_App.IsRwd()?this.GetContainer().parent().attr("data-scroll-direction"):this.GetContainer().attr("data-scroll-direction"));if(!SiebelAppFacade.DecisionManager.IsTouch()){this.EnhanceScroller()}else{this.GetContainer().parent(".siebui-tile-container").addClass("siebui-touch")}};i.prototype.ClearData=function(){var p=this.GetContainer().children("div.siebui-tile-list"),q=this.GetTileScrollDirection();if(this.GetPM().Get("IsInQueryMode")){this.GetIScrollObject().destroy();this.GetContainer().find("#tile-left-scroll, #tile-right-scroll, #tile-up-scroll, #tile-down-scroll").addClass("siebui-tile-scroll-d");this.init=true}p.empty();p=null};i.prototype.BindData=function(u){var s=this.GetPM(),y,r=s.Get("GetRecordSet"),z=r?r.length:0,q=s.Get("GetSelection"),x=s.Get("GetScrollDir"),t=parseInt(s.Get("GetScrollAmount")),p=t?t:z;if(!this.GetBasicLayout()){return}if(SiebelApp.S_App.GetDirection()&&this.GetTileScrollDirection().toLowerCase()==="horizontal"){this.GetContainer().find(".siebui-tile-list").removeClass("siebui-float-left")}p=p<0?-p:p;p=p>z?z:p;p=parseInt(p,10);this.GetContainer().addClass("clearfix");this.SetScrollAmount(t);if(z===0){this.GetContainer().children("div.siebui-tile-list").empty();this.UpdateScrollArrows();return}if(x!==null&&t!==0&&Math.abs(t)<z){y=true;o.call(this,r,p)}else{if(u){this.ClearData();o.call(this,r,p)}else{if(!u){o.call(this,r,p)}}}var w=this.GetPM().Get("GetSelId");$("#"+w+(q)).addClass("siebui-tile-selected");if(this.init&&!s.Get("IsInQueryMode")){l.call(this);this.init=false}if(x===null&&t===0){var v=this.GetIScrollObject();v.refresh();if(v.options.scrollY){v.maxScrollY=-(v.scrollerHeight-v.wrapperHeight);if(v.wrapperHeight>=v.scrollerHeight){v.maxScrollY=0;v._translate(0,0);this.GetContainer().find("#tile-up-scroll").addClass("siebui-tile-scroll-d")}}}record=null};function l(){var r=true,s=false,u=null,p=0,t="#"+this.GetPM().Get("GetFullId")+"_"+g.get("SWE_TILE_CONTAINER");if(this.GetTileScrollDirection().toLowerCase()==="horizontal"){s=true;r=false;if(SiebelApp.S_App.GetDirection()){p=this.GetContainer().find(".siebui-tile").width()-this.GetContainer().children("div.siebui-tile-list").width()}}u=new IScroll(t,{infiniteElements:$(t).children("div.siebui-tile-list"),dataset:q,cacheSize:10,tap:false,click:false,scrollX:s,scrollY:r,ctx:this,startX:p,bindToWrapper:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|SPAN|DIV|UL|LI|IMG|A|I)$/}});if(SiebelApp.S_App.GetDirection()&&this.GetTileScrollDirection().toLowerCase()==="horizontal"){u.scrollToElement($(t).find("div.siebui-tile").first()[0],0)}if(u.options.scrollY){u.maxScrollY=-(u.scrollerHeight-u.wrapperHeight);if(u.wrapperHeight>=u.scrollerHeight){u.maxScrollY=0}}u.on("scrollEnd",j);function q(w,v){}this.SetIScrollObject(u)}function j(){var p=false,x=0,y,z,q,v=this.options.ctx,r=parseInt(v.GetPM().Get("GetRecordSet").length),w=this.scroller.getBoundingClientRect();v.GetContainer().find("."+this.scroller.className+"").addClass("siebui-iscroll");if(this.options.scrollX){x=this.directionX;if(SiebelApp.S_App.GetDirection()){x=-x}x===0?x=(this.distX>0)?-1:1:x;if(SiebelApp.S_App.GetDirection()){p=x>0?((this.x+this.scroller.offsetLeft)>=0):(-(this.x-this.scroller.offsetLeft)>=-this.maxScrollX)}else{p=x>0?(-(this.x-this.scroller.offsetLeft)>=-this.maxScrollX):((this.x+this.scroller.offsetLeft)>=0)}q=parseInt($("#"+this.scroller.firstChild.id).outerWidth(true),10);y=Math.round(this.wrapperWidth/q);if(r>=y){v.EnableScrollArrow($("#"+this.wrapper.id).find("#tile-left-scroll, #tile-right-scroll"))}}else{x=this.directionY;x===0?x=this.distY>0?-1:1:x;z=w.top>0?w.top:-w.top;p=x>0?(this.wrapperHeight+(-(this.y-z)))>=w.bottom:(this.y>=0);q=parseInt($("#"+this.scroller.firstChild.id).outerHeight(true),10);y=Math.round(this.wrapperHeight/q);if(r>=y){v.EnableScrollArrow($("#"+this.wrapper.id).find("#tile-up-scroll, #tile-down-scroll"))}}if(p&&!v.GetContainer().data("ScrollPending")){var s=v.GetPM();var u,t;if(SiebelApp.S_App.GetDirection()){u="ScrollPrevData";t="ScrollNextData";SCROLL_UP=consts.get("PAG_SCROLL_DN"),SCROLL_DN=consts.get("PAG_SCROLL_UP");x=-x}else{u="ScrollNextData";t="ScrollPrevData";SCROLL_UP=consts.get("PAG_SCROLL_UP"),SCROLL_DN=consts.get("PAG_SCROLL_DN")}if(x>0&&s.ExecuteMethod("CanInvokeScrollMethod",u)){v.GetContainer().data("ScrollPending",true);s.OnControlEvent(consts.get("PHYEVENT_VSCROLL_LIST"),SCROLL_DN)}else{if(x<0&&s.ExecuteMethod("CanInvokeScrollMethod",t)){v.GetContainer().data("ScrollPending",true);
s.OnControlEvent(consts.get("PHYEVENT_VSCROLL_LIST"),SCROLL_UP)}else{if(this.options.scrollX&&r>=y){if(SiebelApp.S_App.GetDirection()){x=-x}if(x>0){if(SiebelApp.S_App.GetDirection()){$("#"+this.wrapper.id).find("#tile-left-scroll").addClass("siebui-tile-scroll-d");$("#"+this.wrapper.id).find("#tile-right-scroll").removeClass("siebui-tile-scroll-d")}else{$("#"+this.wrapper.id).find("#tile-right-scroll").addClass("siebui-tile-scroll-d");$("#"+this.wrapper.id).find("#tile-left-scroll").removeClass("siebui-tile-scroll-d")}}else{if(SiebelApp.S_App.GetDirection()){$("#"+this.wrapper.id).find("#tile-right-scroll").addClass("siebui-tile-scroll-d");$("#"+this.wrapper.id).find("#tile-left-scroll").removeClass("siebui-tile-scroll-d")}else{$("#"+this.wrapper.id).find("#tile-left-scroll").addClass("siebui-tile-scroll-d");$("#"+this.wrapper.id).find("#tile-right-scroll").removeClass("siebui-tile-scroll-d")}}}else{if(r>=y){if(SiebelApp.S_App.GetDirection()){x=-x}if(x>0){$("#"+this.wrapper.id).find("#tile-down-scroll").addClass("siebui-tile-scroll-d");$("#"+this.wrapper.id).find("#tile-up-scroll").removeClass("siebui-tile-scroll-d")}else{$("#"+this.wrapper.id).find("#tile-up-scroll").addClass("siebui-tile-scroll-d");$("#"+this.wrapper.id).find("#tile-down-scroll").removeClass("siebui-tile-scroll-d")}}}}}}}function d(){var q=false,y=0,u=0,z,A,p,w,r,s=parseInt(this.GetPM().Get("GetRecordSet").length),t,B=this.GetContainer(),v=this.GetIScrollObject();var x=v.scroller.getBoundingClientRect();if(v.options.scrollX){y=v.directionX;if(SiebelApp.S_App.GetDirection()){y=-y}y===0?y=(v.distX>0)?-1:1:y}else{y=v.directionY;y===0?y=v.distY>0?-1:1:y}r=parseInt($("#"+v.scroller.firstChild.id).outerWidth(true),10);z=Math.round(v.wrapperWidth/r);p=parseInt(this.GetScrollAmount(),10);p=p<0?-p:p;if(v.options.scrollX){v.x=y>0?v.x:0;w=p*r;if(SiebelApp.S_App.GetDirection()){if(y>0){u=v.wrapperWidth>w?-(v.scrollerWidth-v.wrapperWidth):-w}else{u=w>(-v.x)?-r:w-(-v.x)}}else{if(v.x===0){u=v.wrapperWidth>w?-(v.scrollerWidth-v.wrapperWidth):-w}else{u=w>(-v.x)?0:w-(-v.x)}}}else{v.y=y>0?v.y:0;w=p*r;if(v.y===0){u=v.wrapperHeight>w?-(v.scrollerHeight-v.wrapperHeight):u=p>=z?-(v.scrollerHeight-v.wrapperHeight):-w}else{u=w>(-v.y)?0:w-(-v.y)}}u=u>0?u:u;if(v.options.scrollX){u=v.wrapperWidth>=v.scrollerWidth?0:u}else{u=v.wrapperHeight>=v.scrollerHeight?0:u}setTimeout(function(){B.removeData("ScrollPending");B=null},100);v.options.scrollX?v.scrollTo(u,0):v.scrollTo(0,u);t=y>0?((this.GetPM().Get("GetRecordSet").length-1)-p):(this.GetPM().Get("GetRecordSet").length,10-p);t=parseInt(t,10);this.OnRowSelect(t);this.ShowSelection()}function c(s,t){var p=s.GetPM();var q,r;if(SiebelApp.S_App.GetDirection()){q="ScrollPrevData";r="ScrollNextData";SCROLL_UP=consts.get("PAG_SCROLL_DN"),SCROLL_DN=consts.get("PAG_SCROLL_UP");t=-t}else{q="ScrollNextData";r="ScrollPrevData";SCROLL_UP=consts.get("PAG_SCROLL_UP"),SCROLL_DN=consts.get("PAG_SCROLL_DN")}if(t>0&&p.ExecuteMethod("CanInvokeScrollMethod",q)){p.OnControlEvent(consts.get("PHYEVENT_VSCROLL_LIST"),SCROLL_DN);return true}else{if(t<0&&p.ExecuteMethod("CanInvokeScrollMethod",r)){p.OnControlEvent(consts.get("PHYEVENT_VSCROLL_LIST"),SCROLL_UP);return true}}return false}function o(D,r){var E=this.GetPM(),w="",v="",F="",x="",t=0,u=D.length,y=SiebelApp.S_App.IsRwd()?E.Get("GetListId"):E.Get("GetFullId"),s=E.Get("GetScrollDir"),G=this.GetTileScrollDirection(),C=this.GetContainer().find(".siebui-tile-list"),A=E.Get("GetControls");for(var q=0;q<r;q++){w=this.GetBasicLayout();if(SiebelApp.S_App.IsRwd()){x=y.substr(0,y.length-1)+q;w=w.replace(y,x)}else{x=y+"_tile_"+q;w=w.replace("tile_1",y+"_tile_"+q)}v+=w}if(s!==null&&!s){C.children().first().before(v)}else{C.children().last().after(v)}if(C.children().length===0){C.append(v)}else{while(r){if(s!==null&&!s){C.children().last().remove()}else{C.children().first().remove()}r--}}F=C.children();if(E.Get("enableDragAndDropInList")&&!E.Get("IsInQueryMode")){e.call(this,F,E)}if(!SiebelApp.S_App.IsRwd()){for(t=0;t<u;t++){var B=y+"_tile_"+(t);F.eq(t).removeAttr("id").attr("id",B).addClass("siebui-tile").attr("tabindex","-1")}$("#"+y+"_tile_"+(E.Get("GetSelection"))).addClass("siebui-tile-selected")}else{F.addClass("siebui-tile").attr("tabindex","-1");$("#"+y+(E.Get("GetSelection"))).addClass("siebui-tile-selected")}this.SetFirstTileId(x,u);var p,z;for(var H in A){if(A.hasOwnProperty(H)){p=this.GetUIWrapper(A[H]);z=p.GetEl(undefined,true);if(z&&F.eq(0).find(z.eq(0)).length>0){p.ShowUI();p.BindEvents()}}}for(t=0;t<u;t++){SiebelAppFacade.TileLayoutPR.superclass.ShowSelection.call(this,t)}}i.prototype.SetFirstTileId=function(t,u){var q=this.GetTileScrollDirection();var p=$("#"+t).outerHeight(true);var r=$("#"+t).outerWidth(true);this.SetTileHeight($("#"+t).outerHeight(true));this.SetTileWidth($("#"+t).outerWidth(true));if(!q||q.toLowerCase()==="horizontal"){this.GetContainer().parent(".siebui-tile-container").addClass("siebui-horizontal");this.SetContainerHeight(p*u);this.SetContainerWidth(parseInt(r*u/2),10)}else{this.GetContainer().parent(".siebui-tile-container").addClass("siebui-vertical");if(parseInt(this.GetContainer().children("div.siebui-tile-list").css("max-height"),10)>0){if(this.GetContainer().children("div.siebui-tile-list").outerHeight(true)<parseInt(this.GetContainer().children("div.siebui-tile-list").css("max-height"),10)){this.SetContainerHeight(this.GetContainer().children("div.siebui-tile-list").outerHeight(true))}else{this.SetContainerHeight(parseInt(this.GetContainer().children("div.siebui-tile-list").css("max-height"),10))}}else{this.SetContainerHeight(this.GetContainer().height())}}if(!this.GetTileScrollDirection()||this.GetTileScrollDirection().toLowerCase()==="horizontal"){this.GetContainer().children("div.siebui-tile-list").outerHeight(p)}if(!SiebelAppFacade.DecisionManager.IsTouch()){this.UpdateScrollArrows()}if(this.GetTileScrollDirection().toLowerCase()==="horizontal"){var s=Math.floor(this.GetContainer().height()/this.GetTileHeight());if(s>1){this.GetContainer().find(".siebui-tile-list").css("width",Math.ceil((this.GetTileWidth()*(this.GetPM().Get("GetRecordSet").length)/s)))}else{this.GetContainer().find(".siebui-tile-list").css("width",(this.GetTileWidth()*this.GetPM().Get("GetRecordSet").length))}}else{var s=Math.floor(this.GetContainer().width()/this.GetTileWidth());if(s>1){this.GetContainer().find(".siebui-tile-list").css("height",(this.GetTileHeight()*Math.ceil((this.GetPM().Get("GetRecordSet").length)/s)))}else{this.GetContainer().find(".siebui-tile-list").css("height",(this.GetTileHeight()*this.GetPM().Get("GetRecordSet").length))}}};i.prototype.UpdateScrollArrows=function(){var r=this.GetTileScrollDirection();var t=this.GetPM();var s=$("#"+t.Get("GetFullId")+"_"+consts.get("SWE_TILE_CONTAINER"));var q=0;var p=t.Get("GetRecordSet")?t.Get("GetRecordSet").length:0;if(!r||r.toLowerCase()==="horizontal"){q=parseInt((s.width()||$("#s_"+t.Get("GetFullId")+"_div").width())/this.GetTileWidth(),10);if(p>q){if(SiebelApp.S_App.GetDirection()){s.find("#tile-left-scroll").removeClass("siebui-tile-scroll-d")
}else{s.find("#tile-right-scroll").removeClass("siebui-tile-scroll-d")}}else{if(p===q&&t.ExecuteMethod("CanInvokeScrollMethod","ScrollNextData")){if(SiebelApp.S_App.GetDirection()){s.find("#tile-left-scroll").removeClass("siebui-tile-scroll-d")}else{s.find("#tile-right-scroll").removeClass("siebui-tile-scroll-d")}}else{if(SiebelApp.S_App.GetDirection()){s.find("#tile-left-scroll").addClass("siebui-tile-scroll-d");s.find(".siebui-tile-list").removeClass("siebui-float-left")}else{s.find("#tile-right-scroll").addClass("siebui-tile-scroll-d")}}}}else{q=parseInt(this.GetContainerHeight()/this.GetTileHeight(),10);if(p===0||p<=q){s.find("#tile-down-scroll").addClass("siebui-tile-scroll-d")}else{s.find("#tile-down-scroll").removeClass("siebui-tile-scroll-d")}}};function n(s){if(s.type==="mousedown"||s.type==="touchstart"){if(s.data.ctx.GetPM().Get("enableDragAndDropInList")&&s.isDefaultPrevented()){$(s.target).is(":focusable")?$(s.target).focus():$(s.target).closest(":focusable").focus();return}else{return}}if(typeof(this.id)==="string"){var q=s.data.ctx,r=parseInt(this.id.substring(this.id.lastIndexOf("_")+1),10),t=q.GetPM().Get("GetActiveControl"),p=false;q.GetIScrollObject().enable();if((t===null||t===undefined)&&!isNaN(r)){q.OnRowSelect(r)}if(s.target.type){p=(s.target.type.toLowerCase()==="text"||s.target.type.toLowerCase()==="textarea")}if(!SiebelAppFacade.DecisionManager.IsTouch()&&p&&(!m.IsEmpty(s.target.value))){q.GetIScrollObject().disable()}}}function e(p,q){p.draggable({revert:"invalid",helper:"clone",scroll:false,cursor:"move",stack:"#_svf0",appendTo:"#_sweview",zIndex:9999,delay:2000,start:function(r,s){var u=this.id.substring(this.id.lastIndexOf("_")+1);q.GetRenderer().OnRowSelect(u);$(this).data("rowid",u);$(this).data("appletRowId",q.ExecuteMethod("GetDragInfo",[u]));if(s.helper.zIndex()===0){s.helper.zIndex(9999)}var t=r;t.type="mouseup";q.GetRenderer().GetIScrollObject()._end(t);t=null}})}i.prototype.BindEvents=function(){SiebelAppFacade.TileLayoutPR.superclass.BindEvents.call(this);var t=this.GetPM(),v=SiebelApp.S_App.IsRwd()?this.GetPM().Get("GetListId"):t.Get("GetFullId")+"_tile_",q=t.Get("GetRecordSet"),w=q?q.length:0,u=this.GetTileScrollDirection(),s=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper");$("#s_"+t.Get("GetFullId")+"_div").off("click.drilldown").on("click.drilldown",".siebui-ctrl-drilldown",{ctx:this},function(x){var E=x.data.ctx;var F=x.data.ctx.GetPM().Get("GetControls");var D=this.id.indexOf("_mb");var A=$(this).parents(".siebui-tile").attr("id");var C=parseInt(A.substring(A.lastIndexOf("_")+1),10);var y=this.id.substring(0,D);for(var B in F){if(F.hasOwnProperty(B)){var z=F[B];if(z.GetInputName()===y&&!isNaN(D)&&E.OnRowSelect(C)){E.GetPM().OnControlEvent(g.get("PHYEVENT_DRILLDOWN_LIST"),$(this).attr("name"),C);break}}}});var p;if(SiebelApp.S_App.IsRwd()){var r=v.substr(0,v.length-1);p="[id^='"+r+"']"}else{p="[id^='"+v+"']"}this.GetContainer().delegate(p,"focusin mousedown touchstart",{ctx:this},n);if(!u||u.toLowerCase()==="horizontal"){h.call(this,"#tile-left-scroll","#tile-right-scroll","ScrollPrevData","ScrollNextData",SCROLL_UP,"margin-left","marginLeft","mousedown");h.call(this,"#tile-right-scroll","#tile-left-scroll","ScrollNextData","ScrollPrevData",SCROLL_DN,"margin-left","marginLeft","mousedown")}else{h.call(this,"#tile-up-scroll","#tile-down-scroll","ScrollPrevData","ScrollNextData",SCROLL_UP,"","scrollTop","mousedown");h.call(this,"#tile-down-scroll","#tile-up-scroll","ScrollNextData","ScrollPrevData",SCROLL_DN,"","scrollTop","mousedown")}if(t.Get("enableDragAndDropInList")){$("#s_"+t.Get("GetFullId")+"_div").bind("dragover",function(x){x.preventDefault()}).bind("drop",{ctx:this},function(y){y.preventDefault();var z,x;if(y.originalEvent.dataTransfer){z=y.originalEvent.dataTransfer.getData("Text")}if(z){if(z.indexOf("\r")!==-1){x=z.replace(/\n/g,"").split("\r")}else{x=z.split("\n")}y.data.ctx.GetPM().OnControlEvent(g.get("PHYEVENT_RECORD_DROP"),x)}});$("#s_"+this.GetPM().Get("GetFullId")+"_div").droppable({drop:function(x,y){if(!($(".ui-widget-overlay").not("[id]").length>0&&SiebelApp.S_App.GetPopupPM().Get("state")===consts.get("POPUP_STATE_VISIBLE"))){var z=$(this).droppable("option","ctx").GetPM();y.helper.detach();z.OnControlEvent(consts.get("PHYEVENT_RECORD_DROP_GENERIC"),z.Get("dropMethod"))}},ctx:this})}};function h(p,q,t,s,y,v,x,r){var u=this.GetPM();var w=this.GetPM().Get("GetFullId")+"_"+g.get("SWE_TILE_CONTAINER");$("#"+w).find(p).bind(r,{ctx:this},function(D){var F=D.data.ctx.GetIScrollObject();var z,E=0,A=-F.wrapperOffset.left,B=F.scroller.getBoundingClientRect();D.data.ctx.EnableScrollArrow($("#"+w).find(q));F.enable();if(this.id.search("right")>=0||this.id.search("down")>=0){z=1}else{if(this.id.search("left")>=0||this.id.search("up")>=0){z=-1}}if(F.options.scrollX){if(SiebelApp.S_App.GetDirection()){z=-z}if(F.wrapperWidth>-F.maxScrollX){if(SiebelApp.S_App.GetDirection()){if(z>0){E=-(B.left-F.wrapperWidth)<F.wrapperWidth?(B.left-F.wrapperWidth+$(F.wrapper).offset().left):(B.left-(A/2)-F.scroller.offsetLeft)}else{E=B.right-F.wrapperWidth-$(F.wrapper).offset().left}}else{E=z>0?(B.right-A)-F.wrapperWidth:E=(B.left-A)===0?(B.left-A-(F.scroller.offsetLeft/2)):(B.left-A)}}else{if(SiebelApp.S_App.GetDirection()){if(z>0){E=(-(B.left-A-1)>=F.wrapperWidth)?-(F.wrapperWidth+F.scroller.offsetLeft):B.left-A}else{E=((B.right-A)-F.wrapperWidth)>F.wrapperWidth?(F.wrapperWidth+F.scroller.offsetLeft):((B.right-A)-F.wrapperWidth)}}else{if(z>0){E=((B.right-A)-F.wrapperWidth)>F.wrapperWidth?F.wrapperWidth:((B.right-A)-F.wrapperWidth)}else{E=(-(B.left-A-1)>=F.wrapperWidth)?-F.wrapperWidth:B.left-A}}}}else{if(z>0){var C=(D.data.ctx.GetContainer().children("div.siebui-tile-list").offset().top+F.scrollerHeight)-($("#"+F.wrapper.id).offset().top+F.wrapperHeight);E=(C-F.wrapperHeight)>=F.wrapperHeight?F.wrapperHeight:C}else{(-F.y)>=F.wrapperHeight?E=F.wrapperHeight:E=F.y===0?0:-F.y;E=E>0?-E:E}}if(F.options.scrollX){E=F.wrapperWidth>=F.scrollerWidth?0:E}else{E=F.wrapperHeight>=F.scrollerHeight?0:E}setTimeout(function(){if(SiebelApp.S_App.GetDirection()&&F.options.scrollX){z=-z}E=Math.ceil(E);E=parseInt(E,10);F.options.scrollX?F.directionX=z:F.directionY=z;F.options.scrollX?F.scrollBy(-E,0,1000):F.scrollBy(0,-E,1000)},0)})}function k(){var q;var p=this.Get("GetSelection");if(this.Get("GetRecordSet").length===1){p=0}if(SiebelApp.S_App.IsRwd()){q=this.Get("GetListId");q=q.substr(0,q.length-1);q+=(p)}else{q=this.Get("GetFullId")+"_tile_"+(p)}return q}i.prototype.ShowSelection=function(){var p=this.GetPM();var q=p.Get("GetSelection");if(p.Get("GetRecordSet").length===1){q=0}var r=$(this.GetContainer()).find(".siebui-tile-selected");r.removeClass("siebui-tile-selected");var s=this.GetPM().Get("GetSelId");$("#"+s).addClass("siebui-tile-selected");if(q>=0){SiebelAppFacade.TileLayoutPR.superclass.ShowSelection.call(this,q)}};i.prototype.OnRowSelect=function(r){var p=this.GetPM();var q=this;if(Number(r)===Number(p.Get("GetSelection"))){return true
}SiebelApp.S_App.uiStatus.Busy({});if(!p.OnControlEvent(g.get("PHYEVENT_SELECT_ROW"),r,"","")){SiebelApp.S_App.uiStatus.Free();return false}SiebelApp.S_App.uiStatus.Free();return true};i.prototype.EnableScrollArrow=function(p){if(p.length>0){p.removeClass("siebui-tile-scroll-d")}};i.prototype.EnhanceScroller=function(){var r=this.GetPM(),p=r.Get("GetFullId"),v=null,u=((this.GetTileScrollDirection()||"horizontal").toLowerCase()==="horizontal"),s="<div id='"+p+"_scrollarea' class='siebui-tile-scrollarea'></div>",q=m.IsTrue(SiebelApp.S_App.IsAutoOn()),t="";if(q){t=' ot="button" rn="${DIRECTION}scroll" un="${DIRECTION}scroll" '}v='<div id="tile-${DIRECTION}-scroll"'+t+' class="siebui-tile-${DIRECTION}-scroll siebui-tile-scroll-d"><a class="siebui-tile-scroll-anchor" href="#"/></div>';if(u){this.GetContainer().children("div.siebui-tile-list").after(s);$("#"+p+"_scrollarea").append(v.replace(/\${DIRECTION}/g,"left")+v.replace(/\${DIRECTION}/g,"right"))}else{this.GetContainer().children("div.siebui-tile-list").after(s);$("#"+p+"_scrollarea").append(v.replace(/\${DIRECTION}/g,"up")+v.replace(/\${DIRECTION}/g,"down"))}};i.prototype.EndLife=function(){this.SetBasicLayout(null);this.GetContainer().empty();$("#scrollarea").empty();if(this.GetIScrollObject()){this.GetIScrollObject().destroy()}this.SetIScrollObject(null);$("#s_"+this.GetPM().Get("GetFullId")+"_div").off("click.drilldown");SiebelAppFacade.TileLayoutPR.superclass.EndLife.call(this)};return i}());return"SiebelAppFacade.TileLayoutPR"})};