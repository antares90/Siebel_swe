/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET10 */
if(typeof(SiebelAppFacade.GanttPresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.GanttPresentationModel");define("siebel/ganttpmodel",["siebel/pmodel"],function(){SiebelAppFacade.GanttPresentationModel=(function(){var e=SiebelJS.Dependency("SiebelApp.Constants"),aN=e.get("SWE_GANTT_DAYINFO"),I=e.get("SWE_GANTT_DRILLDOWN_CLS"),p=e.get("SWE_GANTT_DYNAMIC"),a0=e.get("SWE_GANTT_STATIC"),aT=e.get("SWE_GANTT_START_DATE"),Z=e.get("SWE_GANTT_TIME_SCALE"),ai=e.get("SWE_GANTT_STARTMILLIS"),aF=e.get("SWE_GANTT_COLOR"),y=e.get("SWE_GANTT_ACTIVITY_START_TIME"),a=e.get("SWE_GANTT_ACTIVITY_END_TIME"),o=e.get("SWE_GANTT_ACTIVITY_NO_DAYS_IN_WEEK"),Q=e.get("SWE_GANTT_ACTIVITY_WEEK_DAY_START"),n=e.get("SWE_GANTT_BOTTOMAXIS"),aa=e.get("SWE_GANTT_NOOFHRS"),x=e.get("SWE_GANTT_ENDMILLIS"),S=e.get("SWE_PROP_BC_NOTI_GENERIC"),F=e.get("SWE_PST_CNTRL_LIST"),aR=e.get("SWE_PST_CUSTOM_CTRL"),ab=e.get("SWE_PROP_NOTI_TYPE"),aX=e.get("SWE_PROP_ARGS_ARRAY"),aG=e.get("SWE_GANTT_PREFERENCES"),g=e.get("SWE_GANTT_RESOURCE_PANE"),aW=e.get("SWE_GANTT_TIMESCALE_PANE"),aH=e.get("SWE_GANTT_UTILIZATION_PANE"),aA=e.get("SWE_GANTT_DRILLDOWN"),C=e.get("SWE_GANTT_DAY_HOUR"),h=e.get("SWE_GANTT_DAY_TWOHOUR"),R=e.get("SWE_GANTT_DAY_DAY_FOURHOUR"),W=e.get("SWE_GANTT_DAY_DAYPART"),V=e.get("SWE_GANTT_WEEK_DAY_DAYPART"),T=e.get("SWE_GANTT_MONTH_DOW_DAYPART"),z=e.get("SWE_GANTT_WEEK_DAY"),aY=e.get("SWE_GANTT_MONTH_DAY"),d=e.get("SWE_GANTT_YEAR_MONTH"),l=e.get("SWE_GANTT_MONTH_DOW"),O=e.get("SWE_GANTT_3MONTH_DOW"),at=e.get("SWE_GANTT_RESHEADER"),U=e.get("SWE_GANTT_RENDER_INFO"),w=e.get("SWE_GANTT_SPL_DATE"),ao=e.get("SWE_GANTT_ICONINFO"),j=e.get("SWE_GANTT_DRILLDOWN_CLS"),Y="Weekend Axis Color TS",H="Weekends",aI="TS COLOR",L="ICON_INFO",k="CurrentDate",c="NextDate",aD="PrevDate",N="TSUnints",az="TNT Utility Service",ap="Hour Axis Color",P="LIC Field",v="Booking Colors",E="EventDefaultColor",aU="Color Display By",a6="Status Abbreviations",ad={1:7,2:1,4:1,32:35,64:31,128:7,256:35,512:1,1024:1,2048:1,4096:1,8192:366,16384:366,32768:35,65536:98},aC={1:6,2:0,4:0,32:28,64:30,128:6,256:28,512:0,1024:0,2048:0,4096:0,8192:364,16384:364,32768:34,65536:91},au=SiebelApp.S_App.LocaleObject,aw=au.GetLocalString("IDS_TNT_PREV_DAY_TOOLTIP"),B=au.GetLocalString("IDS_TNT_NEXT_DAY_TOOLTIP"),aj=au.GetLocalString("IDS_TNT_PREV_WEEK_TOOLTIP"),aK=au.GetLocalString("IDS_TNT_NEXT_WEEK_TOOLTIP"),ah=au.GetLocalString("IDS_CALENDAR_PREVIOUS_MONTH_STRING"),am=au.GetLocalString("IDS_CALENDAR_NEXT_MONTH_STRING"),i="MMMM D, YYYY",a5="MM/dd/yyyy",X="MM/DD/YYYY",a3="Splitter Position",aQ="Column Width",J=SiebelApp.S_App.GetService("Gantt UI Service");function a2(){SiebelAppFacade.GanttPresentationModel.superclass.constructor.apply(this,arguments)}SiebelJS.Extend(a2,SiebelAppFacade.PresentationModel);a2.prototype.Init=function(){SiebelAppFacade.GanttPresentationModel.superclass.Init.call(this);this.AddProperty("CustCtlrName","");this.AddProperty("RevertInfo","");this.AddProperty("TSDDInfo","");this.AddProperty("ResSeq","");this.AddProperty("ResEvents","");this.AddProperty("IsRefreshNeeded",false);this.AddProperty("RevertBooking",false);this.AddProperty("DisableExtendShrinkTS","");this.AddProperty("Round Minutes Events",15);this.AddProperty("fx","");this.AddProperty("RESOURCEHEADER","");this.AddProperty("Activity_DDInfo","");this.AddProperty("DDrag","");this.AddProperty("DRSZ","");this.AddProperty(y,"");this.AddProperty(a,"");this.AddProperty(o,"");this.AddProperty(Q,"");this.AddProperty(aT,"");this.AddProperty(aN,"");this.AddProperty(n,"");this.AddProperty(Z,"");this.AddProperty(aa,"");this.AddProperty(ai,"");this.AddProperty(x,"");this.AddProperty(U,"");this.AddProperty("tooltipMap","");this.AddProperty(w,"");this.AddProperty(L,"");this.AddProperty("Newpages",false);this.AddProperty("RecordSet","");this.AddProperty("ResIDtoIndex",{});this.AddProperty("InEvent","");this.AddProperty(E,"");this.AddProperty("RTL Mode","");this.AddProperty("SERVICE_NAME","");this.AddProperty("TotalHPages","");this.AddProperty("VScrollPos",0);this.AddProperty("ScrollbarWidth",0);this.AddProperty("Scale_factor",1);this.AddProperty("FilterGantt_CLS","");this.AddProperty("MinGanttsize","");this.AddProperty("PanesToRefresh",0);this.AddProperty("RevertDate","");this.AddProperty("Resource Id","");this.AddProperty(a3,"");this.AddProperty(aQ,"");this.AddProperty("EnableTooltip","");this.AddProperty("ShowLegend",true);this.AddProperty("TurnTime","");this.AddProperty("expcolpse",true);this.AddProperty("datePaddingMap","");this.AddProperty("IsTotalHPagesChanged","Y");this.AddMethod("getEvent",av);this.AddMethod("gettaskSeqEvents",G);this.AddMethod("gettimescaleDDcls",aO);this.AddMethod("prepareResInfo",M);this.AddMethod("prepareResStaticInfo",aZ);this.AddMethod("prepareGanttInfo",t);this.AddMethod("prepareTimeScaleInfo",aJ);this.AddMethod("prepareGridInfo",q);this.AddMethod("prepareEventInfo",ax);this.AddMethod("RefreshGanttChart",A);this.AddMethod("InvokeServer",ag);this.AddMethod("CustomDrillDown",ac);this.AddMethod("setHoursFrom",s);this.AddMethod("setDefaults",aB);this.AddMethod("InvokeOperation",aE);this.AddMethod("CanExtendShrinkEvents",aS);this.AddMethod("getTooltip",a1);this.AddMethod("getScrollWidth",f);this.AddMethod("prepareRespage",ay);this.AddMethod("getTimeScaleUnits",a4);this.AddMethod("getTimeScalePeriods",D);this.AddMethod("getDateRange",af);this.AddMethod("prepareLegendMap",aV);this.AddMethod("CanInvokeMethod",b,{sequence:true,scope:this});this.AddMethod("InvokeMethod",ae,{sequence:true,scope:this});this.AddMethod("saveUserPref",aq);this.AddMethod("saveControlValues",ak);this.AttachNotificationHandler(S,function(a7){if(a7&&a7.GetProperty(ab)==="ClosePopup"){SiebelApp.S_App.GetPopupPM().SetProperty("isPrevPopupVisible",false)}},{core:true,scope:this});this.AttachNotificationHandler(S,aM)};a2.prototype.Setup=function(be){SiebelAppFacade.GanttPresentationModel.superclass.Setup.call(this,be);var a7=be.EnumChildren(true),bd,bf=be.GetChildByType("apm"),bg=be.GetChildByType(F),bc=this.Get("ScrollbarWidth");if(!bc){this.ExecuteMethod("getScrollWidth")}if(bf){aP.call(this,bf);if(this.Get("Date Padding for TimeScale LIC")){var a9=this.Get("Date Padding for TimeScale LIC"),a8={};a9=a9.replace(/;/g,":");a9=a9.split(":");var bb=a9.length;for(var ba=0;ba<bb;ba++){a8[a9[ba]]=a9[++ba]}this.SetProperty("datePaddingMap",a8)}}if(bg){bd=bg.EnumChildren(true);do{if(bd.GetType()===aR){this.SetProperty("PanesToRefresh",63);this.ExecuteMethod("prepareGanttInfo",bd.GetChild(0));break}bd=bg.EnumChildren(false)}while(bd)}};function aS(){var a7=":"+this.Get(Z)+":",a8=String(this.Get("DisableExtendShrinkTS"));return(a8.indexOf(a7)===-1)}function ac(a7){this.ExecuteMethod("InvokeMethod","DoInvokeDrilldown",a7)}function aE(a7){this.ExecuteMethod("InvokeMethod","InvokeOperation",a7)}function aO(){if(this.Get("TSDDInfo")){return I}else{return}}function G(a8){var a7=this.Get("ResEvents");if(a7&&a7[a8]&&a7[a8].BOOKINGS){return a7[a8].BOOKINGS}else{return}}function av(a8,a9){var a7=this.Get("ResEvents");
if(a7&&a7[a8]&&a7[a8].EVENTS){return a7[a8].EVENTS[a9]}else{return}}function f(){var a7=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),a8=$("<div>").css({width:"100%"}).appendTo(a7).outerWidth();a7.remove();this.SetProperty("ScrollbarWidth",100-a8)}function aM(a9){var a8,ba=[],bh=0,be,bg,bc=[],bf=0;if(a9.GetProperty(ab)==="Gantt"){a8=a9.GetProperty(aX);if(a8){CCFMiscUtil_StringToArray(a8,ba)}be=CCFMiscUtil_CreatePropSet();bh=ba.length;for(var bd=0;bd<bh;bd++){be.SetProperty(bd.toString(),ba[bd])}bg=CCFMiscUtil_CreatePropSet();bg.DecodeFromString(be.GetProperty("0"));this.ExecuteMethod("prepareGanttInfo",bg);bf=this.Get("PanesToRefresh");if(!(bf&(1<<2))&&((bf&(1<<3))||(bf&(1<<4)))){this.SetProperty("IsRefreshNeeded",true)}}else{if(a9.GetProperty(ab)==="ClosePopup"){this.SetProperty("RevertBooking",true)}else{if(a9.GetProperty(e.get("SWE_PROP_NOTI_TYPE"))==="EI"){a8=a9.GetProperty(e.get("SWE_PROP_ARGS_ARRAY"));if(a8){CCFMiscUtil_StringToArray(a8,ba)}be=CCFMiscUtil_CreatePropSet();var a7=ba.length;for(var bb=0;bb<a7;bb++){be.SetProperty(bb.toString(),ba[bb])}bg=CCFMiscUtil_CreatePropSet();bg.DecodeFromString(be.GetProperty("0"));this.ExecuteMethod("prepareEventInfo",bg);this.SetProperty("Newpages",true)}else{if(a9.GetProperty(ab)==="RevertBooking"){this.SetProperty("RevertBooking",true)}}}}}function A(a8,bc,ba){var bb=this.Get(aT),a9=this.Get("TST"),bd=SiebelApp.S_App.NewPropertySet(),a7=0;a7=a7|(1<<1);a7=a7|(1<<2);a7=a7|(1<<3);a7=a7|(1<<4);this.SetProperty("PanesToRefresh",a7);bd.SetProperty("PanesToRefresh",a7);if((bb!==a8)||(bc&&a9!==bc)){if(typeof(a8)!=="undefined"){if(a8!==0){this.SetProperty(aT,a8)}bd.SetProperty(aT,a8)}if(bc){this.SetProperty("TST",bc)}this.ExecuteMethod("InvokeMethod","RefreshGantt",bd,ba)}}function aV(){var bj=this.Get("Booking Colors"),bb=this.Get("Color Display By"),bd=this.Get("Status Abbreviations"),a7,bi,bc=[],bg=[],bh,bf,bk,ba=0,be=1,a9=" LOV";if(bd&&bb){a7=bd.substring(bd.indexOf(bb)+bb.length+1,bd.indexOf(";",bd.indexOf(bb)))}else{if(bd){a7=bd.substring(bd.indexOf(",")+1,bd.length-1)}else{a7="GS"}}bh=this.Get("Legend Bar Order: "+a7+" "+be);while(bh){bh=bh+";";bf=bh.indexOf(";");while(bf!==-1&&bf!==0){bk=bh.substring(0,bf);bh=bh.substring(bf+1,bh.length);bf=bh.indexOf(";");bc[ba++]=bk}be=be+1;bh=this.Get("Legend Bar Order: "+a7+" "+be)}a7=a7+"_";ba=0;if(bc.length>0){for(var be=0;be<bc.length;be++){var a8=bc[be];if(bj[a7+a8+a9]&&bj[a7+a8]){bg[ba]=new Object;bg[ba].displayValue=bj[a7+a8+a9];bg[ba].color=bj[a7+a8];ba++}}}else{for(var bl in bj){if(bl.indexOf(a7)===0&&bl.indexOf(a9)===-1){bg[ba]=new Object;bg[ba].displayValue=bj[bl+a9];bg[ba].color=bj[bl];ba++}}}return bg}function ag(a9){var a8=CCFMiscUtil_CreatePropSet(),a7=0;a8.SetProperty(aT,this.Get(aT));a7=this.Get("PanesToRefresh");a8.SetProperty("PanesToRefresh",a7);this.ExecuteMethod("InvokeMethod","RefreshGantt",a8)}function t(bc){var a7,bf,a8={},be="DDrag",bb=this.Get("datePaddingMap"),a9=0,ba="DRSZ";this.SetProperty("RecordSet",this.Get("GetRawRecordSet"));this.SetProperty("CustCtlrName",bc.GetValue());this.SetProperty("RTL Mode",bc.GetProperty("RTL Mode"));this.SetProperty("SERVICE_NAME",bc.GetProperty("Gantt Service Name"));if(bc.GetProperty("SD")){this.SetProperty("SD",bc.GetProperty("SD"))}this.SetProperty("ResEvents",{});if(bc&&bc instanceof JSSPropertySet){a7=bc.GetChildCount();for(var bd=0;bd<a7;bd++){bf=bc.GetChild(bd);switch(bf.GetType()){case (aG):case ("DisplayControls"):aP.call(this,bf);if(bb[this.Get(Z)]){a9=bb[this.Get(Z)]}this.SetProperty("TotalHPages",1+(a9*2));break;case (g):this.ExecuteMethod("prepareResInfo",bf);break;case (aW):this.ExecuteMethod("prepareTimeScaleInfo",bf);break;case (aH):this.ExecuteMethod("prepareGridInfo",bf);break;case ("Custom Controls"):this.SetProperty("DateBarControl",bf.GetProperty("DateBar Control Name"));this.SetProperty("LegendControl",bf.GetProperty("Legend Control Name"));break}}a8[L]=this.Get(L);a8.TotalHPages=this.Get("TotalHPages");this.SetProperty(U,a8)}}function aJ(bd){var bg,bh,a8,bf,ba,a9,bb,bc=this.Get("TotalHPages"),be=false;if(bd&&bd instanceof JSSPropertySet){a8=bd.GetChildCount();for(ba=0;ba<a8;ba=ba+1){bg=bd.GetChild(ba);if(bg.GetType()==a0){bb=bg.EnumProperties(true);if(bb){do{this.SetProperty(bb,bg.GetProperty(bb));bb=bg.EnumProperties(false)}while(bb)}bf=bg.GetChildCount();for(a9=bf-1;a9>=0;a9=a9-1){bh=bg.GetChild(a9);switch(bh.GetType()){case (aA):this.SetProperty("TSDDInfo",an(bh));break;case (aN):this.SetProperty(aN,K(bh));break;case (aF):this.SetProperty(aI,an(bh));break;case (ao):this.SetProperty(L,an(bh,this.Get(L)));break;case (ap):var a7=an(bh);this.SetProperty(ap,r(a7));break}}}else{if(bg.GetType()==p){bb=bg.EnumProperties(true);if(bb){do{this.SetProperty(bb,bg.GetProperty(bb));bb=bg.EnumProperties(false)}while(bb)}this.ExecuteMethod("setDefaults");this.createPeriod(-parseInt(bc/2,10),bc);bf=bg.GetChildCount();for(a9=bf-1;a9>=0;a9=a9-1){bh=bg.GetChild(a9);if(bh.GetType()==n){this.SetProperty(n,u(bh))}else{if(bh.GetType()==w){this.SetProperty(w,al.call(this,bh))}}}be=true}}if(!be){this.ExecuteMethod("setDefaults");this.createPeriod(-parseInt(bc/2,10),bc)}}}}function aB(){var a7;a7=this.Get(Z);if(!a7){a7="4";this.SetProperty(Z,a7)}this.SetProperty(aa,ar(a7))}a2.prototype.createPeriod=function(bd,bc){var a7,ba,bi,a9,bb,bf,be=3600000,bg=24,a8=this.ExecuteMethod("getTimeScaleUnits"),bj=this.Get(aN),bh="";a7=new Date(this.Get(aT));if(!a7||!a7 instanceof Date){a7=new Date()}if(this.Get(o)){bb=String(this.Get(o))}else{bb=7}if(this.Get(Q)){bf=String(this.Get(Q))}else{bf=a7.format("EEEE")}this.SetProperty("EndTime","");this.SetProperty("FinalWeekDays",aL(a7,bf,bb,bh));switch(Number(this.Get(Z))){case (C):case (h):case (R):case (W):a7.setDate(a7.getDate()+(bd*a8));a7.setHours(0,0,0,0);ba=new Date(a7.getTime());ba.setDate(a7.getDate()+(bc*a8)-1);ba.setHours(23,59,59,999);break;case (T):a7.setDate(a7.getDate()+(bd*a8));a9=bj[0];this.ExecuteMethod("setHoursFrom",a7,a9.ST);ba=new Date(a7.getTime());ba.setDate(a7.getDate()+(bc*a8)-7);this.SetProperty("StartTime","0");this.SetProperty("EndTime",24*be-1);this.SetProperty("TDays",7*24*be);this.SetProperty("AxisDuration",24*be-1);break;case (z):case (V):a7.setDate(a7.getDate()+(bd*a8));a7.setHours(0,0,0,0);ba=new Date(a7.getTime());ba.setDate(a7.getDate()+(bc*a8)-1);ba.setHours(23,59,59,999);break;case (aY):a7.setDate(a7.getDate()+(bd*a8));a7.setHours(0,0,0,0);ba=new Date(a7.getTime());ba.setDate(a7.getDate()+(bc*a8)-1);ba.setHours(23,59,59,999);break;case (d):a7.setDate(a7.getDate()+(bd*a8));a7.setHours(0,0,0,0);ba=new Date((a7.getTime())+bc*(be*bg*364));ba.setHours(23,59,59,999);break;case (l):a7.setDate(a7.getDate()+(bd*a8));a7.setHours(0,0,0,0);ba=new Date(a7.getTime());ba.setDate(a7.getDate()+(bc*a8)-7);ba.setHours(23,59,59,999);break;case (O):a7.setDate(a7.getDate()+(bd*a8));a7.setHours(0,0,0,0);ba=new Date(a7.getTime());ba.setDate(a7.getDate()+(bc*a8)-7);ba.setHours(23,59,59,999);break;default:a7.setDate(a7.getDate()+(bd*a8));a7.setHours(0,0,0,0);
ba=new Date(a7.getTime());ba.setDate(a7.getDate()+(bc*a8)-1);ba.setHours(23,59,59,999);break}this.SetProperty(ai,a7.getTime());this.SetProperty(x,ba.getTime());this.SetProperty(o,bb);if(this.Get("EndTime")||this.Get("TST")==="256"){this.calcDayLeft()}};function s(bc,a8){var bb=0,a9,ba=0,a7=a8.length;bc.setHours(0,0,0,0);for(a9=0;a9<a7;a9++){if(a8.charAt(a9)!=":"){ba=(ba*10)+Number(a8.charAt(a9))}else{if(bb===0){bc.setHours(ba)}else{if(bb==1){bc.setMinutes(ba)}else{bc.setSeconds(ba);break}}ba=0;bb=bb+1}}}function aL(be,a9,bc,a8){var a7=86400000,ba,bb;var bd=new Date();for(ba=1;ba<8;ba++){if(bd.format("EEEE")===a9){be=bd;break}bd=new Date((be.getTime())+a7*ba)}a8=be.getDay()+",";for(ba=1;ba<bc;ba++){bb=new Date((be.getTime())+a7*ba);a8+=bb.getDay()+","}return a8}function ar(a7){switch(Number(a7)){case (C):case (aY):return 1;case (h):return 2;case (R):return 4;case (l):return 7;case (O):return 7;default:return 1}}function M(a9){var ba,a7=0;if(a9&&a9 instanceof JSSPropertySet){a7=a9.GetChildCount();for(var a8=0;a8<a7;a8++){ba=a9.GetChild(a8);if(ba.GetType()==a0){this.ExecuteMethod("prepareResStaticInfo",ba)}}}}function aZ(ba){var a9,a8=0;if(ba&&ba instanceof JSSPropertySet){a8=ba.GetChildCount();aP.call(this,ba);for(var a7=0;a7<a8;a7++){a9=ba.GetChild(a7);switch(a9.GetType()){case (at):this.SetProperty("RESOURCEHEADER",K(a9));break;case (ao):this.SetProperty(L,an(a9,this.Get(L)));break}}}}function q(a9){var bd,bb,bc,be,a7;if(a9&&a9 instanceof JSSPropertySet){bc=a9.GetChildCount();for(var ba=0;ba<bc;ba++){bd=a9.GetChild(ba);if(bd.GetType()==a0){be=bd.GetChildCount();for(var a8=0;a8<be;a8++){bb=bd.GetChild(a8);switch(bb.GetType()){case aA:this.SetProperty("Activity_DDInfo",an(bb));break;case ao:this.SetProperty(L,an(bb,this.Get(L)));break;case"Color":this.SetProperty(v,an(bb));if(!this.Get(aU)){this.SetProperty(aU,this.Get(v)["Event Status"])}break;case P:this.SetProperty(P,an(bb));break}}a7=bd.GetProperty("Disable ExtendShrink Views");if(a7){this.SetProperty("DisableExtendShrinkTS",":"+a7+":")}a7="";a7=bd.GetProperty("Round Minutes Events");if(a7){this.SetProperty("Round Minutes Events",a7)}a7="";a7=bd.GetProperty(a6);if(a7){this.SetProperty(a6,a7)}a7="";a7=bd.GetProperty("Event Default Color");if(a7){this.SetProperty(E,a7)}}else{if(bd.GetType()==p){this.ExecuteMethod("prepareEventInfo",bd)}}}}}function ax(a8){var a7="",ba=0,bc,bd,a9=this.Get("ResEvents");if(a8){aP.call(this,a8);ba=a8.GetChildCount();for(var bb=0;bb<ba;bb++){bc=[];bd=a8.GetChild(bb);a7=bd.GetType();a9[a7]={};a9[a7].EVENTS=m(bd,bc);a9[a7].BOOKINGS=bc}}}function m(bd,bc){var a9,a8={},a7,bb,ba=bd.GetChildCount();for(a9=0;a9<ba;a9++){bb=bd.GetChild(a9);a7=bb.GetProperty("ID");a8[a7]=an(bb);bc[a9]=a7}return a8}function K(ba){var a8,a7=[],a9=ba.GetChildCount();for(a8=0;a8<a9;a8++){a7[a8]=an(ba.GetChild(a8))}return a7}function an(a9,ba){var a7,a8={};if(ba){a8=ba}if(a9){a7=a9.EnumProperties(true);do{if(a7){if(!a8){a8={}}a8[a7]=a9.GetProperty(a7)}a7=a9.EnumProperties(false)}while(a7)}return a8}function aP(a8){var a7=a8.EnumProperties(true);if(a7){do{this.SetProperty(a7,a8.GetProperty(a7));a7=a8.EnumProperties(false)}while(a7)}}function u(bb){var a8,bd={},bc,a7,a9=bb.GetChildCount(),ba;for(a8=0;a8<a9;a8++){a7=bb.GetChild(a8);bc=a7.GetType();if(!bc){break}ba=new Date(bc).format("MM/dd/yyyy");bd[ba]=an(a7)}return bd}a2.prototype.calcDayLeft=function(){var be=new Date(this.Get(ai)),a7=new Date(this.Get(x)),ba,bc=this.Get("TDays"),a9=0,a8={},bb=this.Get("TST"),bd=this.ExecuteMethod("getTimeScaleUnits");ba=1/(this.Get("TotalHPages")>0?this.Get("TotalHPages"):1);if(bb==="256"){if(bd){ba=ba/bd*7}}while(be.getTime()<=a7.getTime()){a8[(be).format("MM/dd/yyyy")]=a9;a9=a9+ba;be.setTime(be.getTime()+bc)}this.SetProperty("DayLoc",a8);this.SetProperty("PixelsPerUnit",ba);if(this.Get("EndTime")-this.Get("StartTime")>0){this.SetProperty("miniFX",ba/(this.Get("EndTime")-this.Get("StartTime")))}};a2.prototype.calcLeftWidth=function(bc,bj){var bh,bn,bg,bo,bf,bi=new Object(),ba=this.Get("StartTime"),bl=this.Get("EndTime"),bk=this.Get("PixelsPerUnit"),a8=this.Get("AxisDuration"),a9=new Date(this.Get(ai)),bd=this.Get("DayLoc"),bb=60000,a7=this.Get("TST");var be=a9.getTimezoneOffset();var bm;if(a7==="256"){if(typeof bd[(bc).format("MM/dd/yyyy")]==="undefined"){bc.setDate(bc.getDate()+((a9.getDay()-bc.getDay()+7)%7));bc.setHours(0,0,0,0)}if(typeof bd[(bj).format("MM/dd/yyyy")]==="undefined"){bj.setDate(bj.getDate()+((a9.getDay()-bj.getDay()+7)%7));bj.setHours(0,0,0,0)}}bi.Left=bd[(bc).format("MM/dd/yyyy")];bo=bd[(bj).format("MM/dd/yyyy")];bm=bc.getTimezoneOffset();bh=(bc.getHours()*60+bc.getMinutes()+(bm-be))*bb;bm=bj.getTimezoneOffset();bn=(bj.getHours()*60+bj.getMinutes()+(bm-be))*bb;if(bh>=ba&&bh<=bl){bi.Left=bi.Left+(bh-ba)*this.Get("miniFX")}else{if(bh>bl){bi.Left=bi.Left+bk}}if(bn>=ba&&bn<=bl){bo=bo+(bn-ba)*this.Get("miniFX")}else{if(bn>bl){bo=bo+bk}}bi.Width=bo-bi.Left;bi.Left=bi.Left*100*this.Get("TotalHPages")*this.Get("Scale_factor");bi.Width=bi.Width*100*this.Get("TotalHPages")*this.Get("Scale_factor");bi.Left=isNaN(bi.Left)?0:bi.Left;bi.Width=isNaN(bi.Width)?0:bi.Width;return bi};function a1(a9){if(this.Get("EnableTooltip")==="Y"){if(J){var a7=null;var a8={};a8.async=false;a8.selfbusy=true;a8.scope=this;a8.cb=function(){a7=arguments[2];if(a7){this.SetProperty("tooltipMap",a7.GetChildByType("ResultSet"))}};J.InvokeMethod(("GetTooltipInfo"),a9,a8)}}}function al(bl){var bc,bj={},bf,bh,a7,a9,bm,bg,bb,bk,bi,bd=this.Get(ai),a8=this.Get(x),be=bl.GetChildCount();for(bc=0;bc<be;bc++){var ba=false;bm=bl.GetChild(bc);a7=bm.GetProperty("SD");if(!a7){break}else{bk=new Date(a7);bk.setHours(0,0,0,0);bi=bk}a9=bm.GetProperty("ED");if(!a9){ba=true}else{bi=new Date(a9);bi.setHours(0,0,0,0)}bg=new Date(bd);bg.setHours(0,0,0,0);bb=new Date(a8);bb.setHours(0,0,0,0);while(bg.getTime()<=bb.getTime()){if((!ba&&bg.getTime()>=bk.getTime()&&bg.getTime()<=bi.getTime())){bh={};if(bj[bg.format("MM/dd/yyyy")]){bh=bj[bg.format("MM/dd/yyyy")];bf=bm.EnumProperties(true);if(bf){do{if(bf!=="SD"&&bf!="ED"&&bm.GetProperty(bf)){bh[bm.GetProperty(bf)]=""}bf=bm.EnumProperties(false)}while(bf)}}else{bf=bm.EnumProperties(true);if(bf){do{if(bf!="SD"&&bf!="ED"){bh[bm.GetProperty(bf)]=""}bf=bm.EnumProperties(false)}while(bf);bj[bg.format("MM/dd/yyyy")]=bh}}}bg=new Date(bg);bg.setDate(bg.getDate()+1)}}return bj}function ay(bi,bj){var a7=this.Get("RecordSet"),bb=this.Get("ResIDtoIndex"),bk=a7.length,bc=this.Get("RJoinFld"),a9=this.Get("RParentFld"),bg="",ba=0,bm="",bl=this.Get(U)[L],bh=0,bf=this.Get("RColorFld"),a8="";if(!a7){return}if(!bb){return}if(this.Get("RESOURCEHEADER")[0]&&this.Get("RESOURCEHEADER")[0]["ICONFLDS"]){bg=this.Get("RESOURCEHEADER")[0]["ICONFLDS"].split(",");ba=bg.length}for(var be=bi;be<bj&&be<bk;be=be+1){bb[a7[be][bc]]=be;if(a7[be]["Outline Number"]){a8=a7[be]["Outline Number"].match(/./g);if(a8){a7[be].LEVEL=a8.length-1}}if(a7[be]["Has Children"]){if(a7[be].LEVEL===0&&a7[be]["Has Children"]==="1"){a7[be].CLS="siebui-expcoll ui-icon ui-icon-triangle-1-se"
}else{if(a7[be].LEVEL!==0){a7[be].CLS="siebui-expnone ui-icon ui-icon-radio-off"}}}else{a7[be].CLS="siebui-noIcon"}a7[be]["Index"]=be;for(var bd=0;bd<ba;bd++){if(a7[be][bg[bd]]==="Y"){if(bl&&bl[bg[bd]]){bm=bm+"<span><span class='"+bl[bg[bd]]+"'></span></span>"}bh=bh+1}}if(a7[be].LEVEL>=bh){a7[be].LEVEL=a7[be].LEVEL-bh}a7[be]["Icons"]=bm;bm="";bh=0;a7[be].STCLS="";if(a7[be][bf]){a7[be].STCLS=" siebui-"+a7[be][bf]}}this.SetProperty("RecordSet",a7);this.SetProperty("ResIDtoIndex",bb)}a2.prototype.prepareUtillpage=function(bx,bn){var bp=this.Get("ResEvents"),bg=this.Get(ai),bd=this.Get("DayLoc"),bo=this.Get("fx"),bz=this.Get("RecordSet"),bw=0,bD=this.Get("RJoinFld"),bb=this.Get("RParentFld"),by=this.Get(x),bi="ST",bj,a8;ETF="ET";bw=bz?bz.length:0;if(this.Get("TurnTime")==="Y"){bi="AST";ETF="AET"}for(var bC=bx;bC<bn;bC=bC+1){if(bp[bz[bC][bD]]){bz[bC].EVENTS=bp[bz[bC][bD]].EVENTS;bz[bC].BOOKINGS=bp[bz[bC][bD]].BOOKINGS;var bG="",a9=0,bu="",a7=20,be=0;if(bz[bC].BOOKINGS){var bh=bz[bC].BOOKINGS.length,bl=0,bt=0,bk=0;for(var bA=0;bA<bh;bA=bA+1){bu=bz[bC].EVENTS[bz[bC].BOOKINGS[bA]];if(bi==="AST"&&typeof(bu[bi])==="undefined"){bi="ST"}if(ETF==="AET"&&typeof(bu[ETF])==="undefined"){ETF="ET"}var bq=new Date(bu[bi]);var bm=new Date(bu[ETF]);if(by<bq.getTime()){continue}if(by<bm.getTime()){bm=new Date(by)}if(this.Get("EndTime")){if(bq.getTime()<bg){bq=new Date(bg)}if(bq.format("MM/dd/yyyy")!==bm.format("MM/dd/yyyy")&&(typeof(bd[(bq).format("MM/dd/yyyy")])==="undefined"||typeof(bd[(bm).format("MM/dd/yyyy")])==="undefined")){var bf=false;var bF=false;var bB=new Date(bq.getTime());var bE=new Date(bm.getTime());for(var bv=0;bv<7;bv++){if(bB>=bE){break}if(!bf&&typeof(bd[(bB).format("MM/dd/yyyy")])!=="undefined"){bf=true}if(!bF&&typeof(bd[(bE).format("MM/dd/yyyy")])!=="undefined"){bF=true}if(bf&&bF){bq=new Date(bB.getTime());bm=new Date(bE.getTime());break}if(!bf){bB.setDate(bB.getDate()+1);bB.setHours(0,0,0,0)}if(!bF){bE.setDate(bE.getDate()-1);bE.setHours(23,59,59,999)}}}}if(bu.OLPCNT&&bG!==""&&bG.loco){a9=0}if(bu.OLPCNT){bt=(a7/bu.OLPCNT);bk=bt;if(this.Get("isHospitalityScheduler")){if(bu.SEQ){bl=bk*(bu.SEQ-1)}}else{a9++;if(a9==1){bl=be}else{if(bu.OTE){}else{bl=bl+bt}}}}else{a9=0;bl=be;bk=a7}bj=0;a8=null;if(this.Get("EndTime")||this.Get("TST")=="256"){a8=this.calcLeftWidth(bq,bm);bj=1}bz[bC].EVENTS[bz[bC].BOOKINGS[bA]]["left"]=bj?a8.Left:((bq.getTime()-bg)*100*this.Get("TotalHPages"))/(by-bg)*this.Get("Scale_factor");bz[bC].EVENTS[bz[bC].BOOKINGS[bA]]["width"]=bj?a8.Width:((bm-bq)/(by-bg))*100*this.Get("TotalHPages")*this.Get("Scale_factor");bz[bC].EVENTS[bz[bC].BOOKINGS[bA]]["top"]=bl;bz[bC].EVENTS[bz[bC].BOOKINGS[bA]]["height"]=bk;if(this.Get("TurnTime")==="Y"&&bz[bC].EVENTS[bz[bC].BOOKINGS[bA]]["STTF"]==="Y"){var br=new Date(bu.ST);if(br.getTime()!==bq.getTime()){bz[bC].EVENTS[bz[bC].BOOKINGS[bA]]["SW"]=((br.getTime()-bq.getTime())/(bm-bq))*100}var bs=new Date(bu.ET);if(bs.getTime()!==bm.getTime()){bz[bC].EVENTS[bz[bC].BOOKINGS[bA]]["TW"]=((bm.getTime()-bs.getTime())/(bm-bq))*100}}var ba="";var bc=((this.Get("DDrag")!="Y")&&(bz[bC].EVENTS[bz[bC].BOOKINGS[bA]]["DRG"]==="Y"));var bH=((this.Get("DRSZ")!="Y")&&(bz[bC].EVENTS[bz[bC].BOOKINGS[bA]]["RSZ"]?bz[bC].EVENTS[bz[bC].BOOKINGS[bA]]["RSZ"]==="Y":bz[bC].EVENTS[bz[bC].BOOKINGS[bA]]["DRG"]==="Y"));if(bc){ba=ba+" Dragpble"}if(bH){ba=ba+" Rsizable"}if(bu.OLPCNT&&bu.OLPCNT==="2"){ba=ba+" siebui-overlapEvent"}if(bu.BT&&bu.BT==="Backup"){ba=ba+" siebui-backupEvent"}bz[bC].EVENTS[bz[bC].BOOKINGS[bA]]["CLS"]=ba;bG=bu}}}else{bz[bC].EVENTS={};bz[bC].BOOKINGS={}}}this.SetProperty("RecordSet",bz)};function r(a8){var a7={},a9,bg,bc,ba,be,bf,bb,bd;for(bd in a8){if(a8.hasOwnProperty(bd)){bb=bd.indexOf("-");if(bb==-1){continue}be=Number(bd.substring(0,bb));bf=Number(bd.substring(bb+1,bd.length));while(be<bf){a7[be]=a8[bd];be=be+1}}}return a7}function a4(){return ad[this.Get(Z)]}function D(){return aC[this.Get(Z)]}function af(a7){var bb,a9=this.ExecuteMethod("getTimeScalePeriods"),a8,ba;if(a7===""){a7=this.Get(aT)}bb=au.GetStringFromDateTime(a7,X,i);if(a9>0){ba=new Date(a7);ba.setDate(ba.getDate()+a9);a8=au.GetStringFromDateTime(ba.format(a5),X,i);return(bb+" - "+a8)}else{return bb}}function ae(a9,bb,ba,a8){var a7=0;if(a9==="FilterGantt"||a9==="ReSetFilterGantt"){a7=a7|(1<<1);a7=a7|(1<<2);a7=a7|(1<<4);this.SetProperty("PanesToRefresh",a7);bb.SetProperty("PanesToRefresh",a7);a8.CancelOperation=false}else{if(a9==="RefreshGantt"){a7=this.Get("PanesToRefresh");bb.SetProperty("PanesToRefresh",a7);bb.SetProperty("TST",this.Get("TST"));a8.CancelOperation=false}else{if(a9==="Show Legends"){this.SetProperty("ShowLegend",true);a8.CancelOperation=true}else{if(a9==="Hide Legends"){this.SetProperty("ShowLegend",false);a8.CancelOperation=true}else{if(a9==="ExpandAll"){this.SetProperty("expcolpse",true);a8.CancelOperation=true}else{if(a9==="CollapseAll"){this.SetProperty("expcolpse",false);a8.CancelOperation=true}else{if(a9==="FilterDisplayOptions"||a9==="ResetDisplayOptions"){if(a9==="ResetDisplayOptions"){a7=a7|(1<<0);this.SetProperty(aU,"");this.SetProperty("Redraw Legends","Y")}a7=a7|(1<<1);a7=a7|(1<<2);a7=a7|(1<<4);this.SetProperty("PanesToRefresh",a7);bb.SetProperty("PanesToRefresh",a7);a8.CancelOperation=false}else{a8.CancelOperation=false}}}}}}}}function b(a8,a7){if(a8==="Show Legends"){a7.CancelOperation=true;a7.ReturnValue=!this.Get("ShowLegend")}else{if(a8==="Hide Legends"){a7.CancelOperation=true;a7.ReturnValue=this.Get("ShowLegend")}else{a7.CancelOperation=false}}}function aq(a9){var a8=SiebelApp.S_App.GetService(this.Get("SERVICE_NAME"));if(a8){var a7={};a7.async=false;a7.npr=true;a7.selfbusy=true;a7.scope=this;a7.cb=function(){};a8.InvokeMethod("SaveGanttUserPref",a9,a7)}}function ak(a7){this.ExecuteMethod("InvokeMethod","SaveControlValues",a7)}return a2}());return"SiebelAppFacade.GanttPresentationModel"})};