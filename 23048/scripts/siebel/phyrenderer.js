/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET10 */
if(typeof(SiebelAppFacade.PhysicalRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.PhysicalRenderer");define("siebel/phyrenderer",["siebel/basephyrenderer","siebel/htmltmplmgr"],function(){SiebelAppFacade.PhysicalRenderer=(function(){var at=SiebelJS.Dependency("SiebelApp.Utils");var Z=SiebelJS.Dependency("SiebelApp.Constants");var I=SiebelJS.Dependency("SiebelAppFacade.HTMLTemplateManager");var ad=Z.get("SWE_PST_BUTTON_CTRL");var ar=Z.get("SWE_CTRL_DETAIL");var ae=Z.get("SWE_CTRL_MVG");var A=Z.get("SWE_CTRL_PICK");var am=Z.get("SWE_CTRL_RADIO");var V=Z.get("SWE_CTRL_CHECKBOX");var r=Z.get("SWE_CTRL_COMBOBOX");var aq=Z.get("SWE_CTRL_CHART");var an=Z.get("SWE_CTRL_PLAINTEXT");var e=Z.get("SWE_CTRL_DATE_TIME_PICK");var M=Z.get("SWE_CTRL_DATE_PICK");var y=Z.get("SWE_CTRL_CALC");var ag=Z.get("SWE_CTRL_DATE_TZ_PICK");var g=Z.get("SWE_CTRL_CURRENCY_CALC");var O=Z.get("SWE_CTRL_TEXT");var a=Z.get("SWE_CTRL_TEXTAREA");var T=Z.get("SWE_CTRL_PWD");var B=Z.get("SWE_CTRL_RTCEMBEDDED");var w=Z.get("SWE_CTRL_RTCEMBEDDEDTEXTONLY");var f=Z.get("SWE_CTRL_RTCEMBEDDEDLINKFIELD");var U=Z.get("SWE_CTRL_RTCPOPUP");var u=Z.get("SWE_CTRL_RTCIO");var aj=Z.get("SWE_CTRL_INKDATA");var l=Z.get("SWE_CTRL_LINK");var ai=Z.get("SWE_CTRL_LABEL");var aa=Z.get("SWE_CTRL_URL");var ah=Z.get("SWE_CTRL_MAILTO");var ac=/(About Record Applet\w*)|(About SRF Applet\w*)|(About Siebel Applet\w*)|(About View Applet\w*)|(Record Count Applet\w*)|(Technical Support Applet\w*)/;var S=Z.get("SWE_CTRL_EFFDAT");var J=Z.get("SWE_CTRL_IMAGECONTROL");var Y=Z.get("SWE_CTRL_FILE");var t=Z.get("SWE_PST_COL");var c=Z.get("SWE_PST_APPLET_MODE_QUERY");var ab=Z.get("SWE_PST_APPLET_MODE_EDIT");var L=Z.get("SWE_PST_APPLET_MODE_NEW");function F(au){SiebelAppFacade.PhysicalRenderer.superclass.constructor.call(this,au);var av=null;this.SetFirstControl=function(ax){av=ax};this.GetFirstControl=function(){return av};var aw=false;this.SetIsGridBaseForm=function(ax){aw=ax};this.GetIsGridBaseForm=function(){return aw};this._EndLife=function(){av=null}}SiebelJS.Extend(F,SiebelAppFacade.BasePR);F.prototype.Init=function(){SiebelAppFacade.PhysicalRenderer.superclass.Init.call(this);this.AttachPMBinding("UpdateQuickPickInfo",this.UpdatePick);this.AttachPMBinding("UpdateAppletMessage",o);this.AttachPMBinding("UpdateCurrencyCalcInfo",q);this.AttachPMBinding("UpdateConditionals",i);this.AttachPMBinding("ProcessCancelQueryPopup",ap);this.AttachPMBinding("FocusOnApplet",b);this.AttachPMBinding("HandleCtrlDefChange",this.RefreshControl);this.AttachPMBinding("SetCanInvokeState",al);this.AttachPMBinding("BeginQueryState",ao);this.AttachPMBinding("EndQueryState",x);this.AttachPMBinding("UpdateRowCounter",v);this.AttachPMBinding("ShowPopup",this.ShowPopup);this.AttachPMBinding("isControlPopupOpen",p);this.AttachPMBinding("MaskLeaveField",this.MaskLeaveField);this.AttachPMBinding("ShowSelection",this.ShowSelection);this.AttachPMBinding("ResetAppletState",this.ResetRendererState);this.AttachPMBinding("RefreshData",this.BindData);this.AttachPMBinding("FieldChange",this.SetControlValue);this.AttachPMBinding("UpdateStateChange",this.UpdateUIControls);this.AttachPMBinding("InvokeStateChange",this.UpdateUIButtons);this.AttachPMBinding("GetPhysicalControlValue",this.GetPhysicalControlValue);this.AttachPMBinding("SetFocusToCtrl",this.SetFocusToControl);this.AttachPMBinding("FocusFirstControl",this.FocusFirstControl);this.AttachPMBinding("SetHighlightState",Q);this.AttachPMBinding("UpdateUI",function(){if(this.GetPM().Get("UpdateUI")){this.ShowSelection()}})};F.prototype.RefreshControl=function(av){var au=$("#"+av.GetInputName())[0]||$("[name="+av.GetInputName()+"]");if(au.length>0){au.nextAll().remove();this.GetUIWrapper(av,true);this.ShowUIControl(av);this.BindControlEvents(av);this.EnableControl(av,this.GetPM().ExecuteMethod("CanUpdate",av.GetName()));d.call(this,av)}};F.prototype.EndLife=function(){var aw=this.GetPM(),au=aw.Get("GetControls");for(var av in au){var az=au[av];if(az.GetUIType()===B){var ay=CKEDITOR.instances[az.GetInputName()];if(ay){var ax=this.GetUIWrapper(az).GetEl();if(!ax.data("pendingAction")){ay.destroy(true)}}}}$("#s_"+aw.Get("GetFullId")+"_div").off("click click.drilldown");this._EndLife();SiebelAppFacade.PhysicalRenderer.superclass.EndLife.call(this)};F.prototype.ResetRendererState=function(){};F.prototype.UpdatePick=function(){var au=arguments[arguments.length-1];var av=this.GetPM().Get("GetActiveControl");if(!av){return}this.GetUIWrapper(av).UpdatePickList(au);delete this.inProgress};function q(){var ax=this.GetPM();var aA=SiebelApp.S_App.GetPopupPM();$("div[name='popup']").find("div[name=CurrencyCalc]").remove();var ay=ax.ExecuteMethod("GetCurrencyCalInfo");var aB={pickId:ay[0],pickName:ay[1],pickValue:ay[2],dateId:ay[3],dateName:ay[4],dateValue:ay[5],calcId:ay[6],calcName:ay[7],calcValue:ay[8],hideExchDate:ay[9],CCodeReadOnly:ay[10],eDateReadOnly:ay[11],AmountReadOnly:ay[12],sourceField:ay[13],qtpInfo:ay[14],dateformat:ay[15],dateFieldName:ay[16]};var az=ax.Get("GetActiveControl");if(!az){var aD=ax.Get("GetControls");for(var aC in aD){if(aD.hasOwnProperty(aC)){if(aD[aC].GetInputName()===aB.sourceField){az=aD[aC];break}}}}var aw='<div name="CurrencyCalc" class="siebui-popup-currency">';var av=ax.ExecuteMethod("GetFieldDataType",aB.dateFieldName);var au=SiebelApp.S_App.LocaleObject.StringToFormatted(av,aB.dateValue,aB.dateformat);aw+='<input type="hidden" autofocus="autofocus"/>';aw+='<div id="'+aB.pickId+'_cc" class="siebui-popup-input-row"><span class="siebui-popup-label">'+aB.pickName+'</span><input type="text" id="'+aB.pickId+'" tabindex="100" aria-label="'+aB.pickName+'" class="siebui-ctrl-pick" value="'+aB.pickValue+'" '+(aB.CCodeReadOnly?'readonly="readonly" ':"")+"></div>";if(!aB.hideExchDate){aw+='<div id="'+aB.dateId+'_cc" class="siebui-popup-input-row"><span class="siebui-popup-label">'+aB.dateName+'</span><input type="text" id="'+aB.dateId+'" tabindex="101" aria-label="'+aB.dateName+'" class="siebui-ctrl-date" value="'+au+'" '+(aB.eDateReadOnly?' readonly="readonly" ':"")+"></div>"}aw+='<div id="'+aB.calcId+'_cc" class="siebui-popup-input-row"><span class="siebui-popup-label">'+aB.calcName+'</span><input type="text" id="'+aB.calcId+'" tabindex="102" aria-label="'+aB.calcName+'" class="siebui-ctrl-calc" value="'+aB.calcValue+'" '+(aB.AmountReadOnly?'readonly="readonly" ':"")+"></div>";aw+="</div>";if(aA.Get("state")===Z.get("POPUP_STATE_UNLOADED")){aA.Setup()}aA.SetProperty("isCurrencyOpen",true);aA.ExecuteMethod("OpenPopup",aw,0,0,false,false,true);aA.SetProperty("isCurrencyOpen",true);$("div[name=popup] ").find("div[name=CurrencyCalc]").parents("div.ui-dialog").children("div.ui-dialog-titlebar").hide().end().end().bind("keydown",{ctx:this,ctrl:az,popPM:aA},function(aF){if(aF.keyCode===$.ui.keyCode.ESCAPE){if(aF.data.popPM.Get("isCurrencyOpen")){aF.data.popPM.SetProperty("isCurrencyOpen",false);aF.data.ctx.GetPM().ExecuteMethod("NotifyClosePopup");aF.data.ctx.SetFocusToControl(aF.data.ctrl.GetName(),true)}}if(aF.keyCode===$.ui.keyCode.ESCAPE||aF.keyCode===$.ui.keyCode.ENTER){aF.stopPropagation()
}});$("div[name=CurrencyCalc]").parents("div.ui-dialog-content").removeClass("minWidthContainer");SiebelAppFacade.ControlBuilder.Pick({target:"#"+aB.pickId,className:"siebui-icon-pick",scope:this,control:az,click:function(aF){this.GetPM().ExecuteMethod("ShowPickPopup")}});SiebelAppFacade.ControlBuilder.DatePick({target:"#"+aB.dateId,className:"siebui-icon-date",control:az,scope:this,showPopup:false,click:function(aH,aG){if(!aB.eDateReadOnly){this.GetPM().SetProperty("isControlPopupOpen",true);$.data(this,"innerCtrlElem",{date:aG});var aF=this;SiebelAppFacade.ControlBuilder.DatePick({target:aG,className:"siebui-icon-date",control:aH,scope:this,showPopup:true,yearRange:"c-100:c+100",getISOVal:function(){return at.ToISOFormat($(this.target).val(),false)},onClose:function(aK,aJ){$(this).datetimepicker("destroy").focus();aF.GetPM().SetProperty("isControlPopupOpen",false);$.removeData("innerCtrlElem");if(at.IsISO(consts.get("SWE_CTRL_DATE_PICK"),aK)){var aI=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aK,consts.get("ISO_DATE_FORMAT"),SiebelApp.S_App.LocaleObject.GetDateFormat());$(this).val(aI)}else{$(this).val(aK)}}})}}});SiebelAppFacade.ControlBuilder.Calculator({target:"#"+aB.calcId,className:"siebui-icon-calc",control:az,dc:SiebelApp.S_App.LocaleObject.GetDispCurrencyDecimal(),scope:this,click:function(aH,aG){if(!this.GetPM().ExecuteMethod("CanUpdate",aH.GetName())){return}this.GetPM().SetProperty("isControlPopupOpen",true);$.data(this,"innerCtrlElem",{calc:aG});this.SetControlValue(aH,this.GetPM().ExecuteMethod("GetFieldValue",aH));var aF=this;SiebelAppFacade.DecisionManager.PauseVKeyboard($(aG));SiebelAppFacade.ControlBuilder.Calculator({target:aG,className:"siebui-icon-calc",control:aH,dc:SiebelApp.S_App.LocaleObject.GetDispCurrencyDecimal(),show:true,beforeShow:function(aN,aM){var aL=aN;var aI=$("#"+aB.pickId).val();if(aI){var aK;var aO=SiebelApp.S_App.LocaleObject.GetCurrency(aI);aO=aO?aO.m_sSymbol:null;if(aO){aL=aL.replace(aO,"")}}var aJ=SiebelApp.S_App.LocaleObject.GetDispCurrencySeparator(),aL=aL.replace(new RegExp("\\"+aJ,"ig"),"").trim();$(this).val(aL)},close:function(aI){var aJ=aI.replace(/\[/g,"").replace(/\]/g,"");aF.SetControlValue(aH,aJ);if($(this).parents("body").length){$(this).calculator("destroy").next("img").show().end().focus()}aF.GetPM().SetProperty("isControlPopupOpen",false);$.removeData("innerCtrlElem");aF.GetPM().OnControlEvent(Z.get("PHYEVENT_CONTROL_FOCUS"),aH);SiebelAppFacade.DecisionManager.ResumeVKeyboard($(this))}})}});N.call(this,aB.qtpInfo);$("#"+aB.pickId).bind("focus",{ctx:this,ctrl:az},function(aF){aF.data.ctx.GetPM().OnControlEvent(Z.get("PHYEVENT_CONTROL_FOCUS"),aF.data.ctrl,$(this).val())}).bind("blur",{ctx:this,ctrl:az,ctrlType:aB.pickName},function(aG){aG.data.ctx.onBlurCurrency(aG.data.ctrlType,$(this).val());aG.data.ctx.GetPM().ExecuteMethod("CurrencyPostChanges");var aH=aG.data.ctx.GetPM().ExecuteMethod("GetCurrencyCalInfo");var aF=$("#"+aH[6]);aF.val(aH[8])}).bind("keydown",{ctx:this,ctrl:az,readOnly:aB.CCodeReadOnly},function(aF){aF.data.ctx.HandleKeyEvents($(this),aF,$(this).val())});$("#"+aB.calcId).bind("focus",{ctx:this,ctrl:az},function(aF){aF.data.ctx.GetPM().OnControlEvent(Z.get("PHYEVENT_CONTROL_FOCUS"),aF.data.ctrl,$(this).val())}).bind("blur",{ctx:this,ctrl:az},function(aH){if(aH.data.ctx.GetPM().Get("isControlPopupOpen")===false){if(!!$(this).data("inLeaveField")){return}var aI=$(this).val();var aG=0;while(isNaN(aI.charAt(aG))){aG++}aI=aI.substring(aG);aH.data.ctx.GetPM().OnControlEvent(Z.get("PHYEVENT_CONTROL_BLUR"),aH.data.ctrl,aI);aH.data.ctx.GetPM().ExecuteMethod("CurrencyPostChanges");var aJ=aH.data.ctx.GetPM().ExecuteMethod("GetCurrencyCalInfo");var aF=$("#"+aJ[6]);aF.val(aJ[8])}}).bind("keydown",{ctx:this,ctrl:az,readOnly:aB.AmountReadOnly},function(aF){if(!$.calculator._showingCalculator){aF.data.ctx.HandleKeyEvents($(this),aF,$(this).val())}});$("#"+aB.dateId).bind("blur",{ctx:this,ctrl:az,readOnly:aB.eDateReadOnly},function(aG){if(!aG.data.readOnly){var aH=at.Trim($(this).val()),aI=at.ToISOFormat(aH,false)||aH;if(at.IsISO(consts.get("SWE_CTRL_DATE_PICK"),aI)){var aF=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aI,consts.get("ISO_DATE_FORMAT"),SiebelApp.S_App.LocaleObject.GetDateFormat());$(this).val(aF)}else{$(this).val(aI)}}return false}).bind("keydown",{ctx:this,ctrl:az,readOnly:aB.eDateReadOnly},function(aF){aF.data.ctx.HandleKeyEvents($(this),aF,$(this).val())});$("div.ui-widget-overlay").bind("click",{ctx:this,ctrl:az,popPM:aA},function(aF){if(aF.data.popPM.Get("isCurrencyOpen")){aF.data.popPM.SetProperty("isCurrencyOpen",false);aF.data.ctx.GetPM().ExecuteMethod("NotifyClosePopup");aF.data.ctx.SetFocusToControl(aF.data.ctrl.GetName(),true)}});var aE=this;setTimeout(function(){var aF=$("#"+az.GetInputName()+"_icon")||$("#"+az.GetInputName().replace("_0","_"+ax.Get("GetSelection"))+ +"_icon");if(aF.length===0&&typeof(aE.GetColumnHelper)==="function"){aF=$('[name="'+aE.GetColumnHelper().GetModifiedColumnName(az.GetName())+'"]').next("img");if(aF.length===0){aF=aF.end()}}$("div[name=popup] ").find("div[name=CurrencyCalc]").parents("div.ui-dialog").position({my:"top",at:"bottom",collision:"flipfit",of:aF});setTimeout(function(){$("#"+aB.pickId).focus()},5)},15)}F.prototype.onBlurCurrency=function(aw,av){var au=this.GetPM().ExecuteMethod("GetCurrencyCalInfo");var ax;av=av.toUpperCase();if(aw==="Currency Code"){ax=au[0];var ay=SiebelApp.S_App.LocaleObject.GetCurrency(av);if(ay){$("#"+ax).val(av)}else{$("#"+ax).val(au[2])}}};function N(ay){if(ay){var au=ay.GetChildCount();for(var av=0;av<au;av++){var ax=ay.GetChild(av);var aw=ax.GetProperty(consts.get("SWE_PROP_ID"));$("#"+aw).attr({ot:ax.GetProperty(consts.get("SWE_PROP_QTP_OT")),rn:ax.GetProperty(consts.get("SWE_PROP_QTP_RN")),un:ax.GetProperty(consts.get("SWE_PROP_QTP_UN"))})}}}function o(){var au=this.GetPM(),ax=au.Get("GetQueryModePrompt"),aw=au.Get("GetId"),av;msgSpan=$("#"+aw+"_msg"),markup="<div class='siebui-applet-msg'><span id="+aw+"_msg><span></div>";if((SiebelApp.S_App.IsRwd())&&(at.IsTrue(au.Get("IsObjResponsive")))){av=$("#"+au.Get("GetRowCount"))}else{av=$("#s_"+aw+"_rc")}if(msgSpan.length===0){if(av.parent().prev("td").length){av.parent().prev("td").append(markup)}else{av.parent().append(markup)}}if(ax){av.addClass("siebui-no-display");$("#"+aw+"_msg").html(ax).parent(".siebui-applet-msg").removeClass("siebui-no-display")}else{$("#"+aw+"_msg").parent(".siebui-applet-msg").addClass("siebui-no-display");av.removeClass("siebui-no-display")}av=null}function ap(){var az=SiebelApp.S_App.GetPopupPM();$("[name=cancelQuery]").remove();var ay=$('<div name="cancelQuery"></div>');var aC="";var aE=SiebelApp.S_App.LocaleObject;var aB=aE.GetLocalString("IDS_CANCELQRY_INITIALTEXT");var aw=aE.GetLocalString("IDS_CANCELQRY_RESPONSETEXT");var aD=aE.GetLocalString("IDS_CANCELQRY_HEADERTEXT");var av=aE.GetLocalString("IDS_CANCELQRY_BUTTONTEXT");aC+='<div align ="center" id = "responseTxt_div"><p id="initTxt_CQ"><b>'+aB+"</b></p></div><br />";var au='<button id="cancelQry_Ctrl_CQ" class="appletButton" type="button" title="'+av+'" >'+av+"</button>";
aC+='<div align="center" id = "cancelbtn_div">'+au+"</div>";ay.append(aC);if(az.Get("state")===Z.get("POPUP_STATE_UNLOADED")){az.Setup()}az.SetProperty("IsCancelQryPopupOpen",true);az.ExecuteMethod("SetPopupVisible",true);az.SetProperty("content",ay);var aA=$("#cancelQry_Ctrl_CQ");if(aA.length!==0){var ax=this;aA.bind("click",function(aF){var aG='<p id="responseTxt_CQ"><b>'+aw+"</b></p>";$("#initTxt_CQ").replaceWith(aG);az.OnControlEvent(Z.get("PHYEVENT_CANCEL_QRY_POPUP"),aF)})}}function al(){var au=this.GetPM();var av=$("#s_"+au.Get("GetFullId")+"_div");if(au.ExecuteMethod("IsMethodDefault","MaximizeApplet")&&au.ExecuteMethod("CanInvokeMethod","MaximizeApplet")===false){av.removeClass("siebui-applet-minimize").addClass("siebui-applet-maximize")}else{if(au.ExecuteMethod("IsMethodDefault","MinimizeApplet")&&au.ExecuteMethod("CanInvokeMethod","MinimizeApplet")===false){av.removeClass("siebui-applet-maximize").addClass("siebui-applet-minimize")}else{av.removeClass("siebui-applet-maximize siebui-applet-minimize")}}}function D(aw,av,au){if(this.GetPM().Get("IsInQueryMode")&&aw.GetCaseSensitive()){if(au==true&&$(av).val()===""){$(av).val(SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK"));$(av).addClass("siebui-watermark-text")}else{if(au==false&&$(av).val()===SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK")){$(av).val("");$(av).removeClass("siebui-watermark-text")}}}}F.prototype.ShowUI=function(){SiebelAppFacade.PhysicalRenderer.superclass.ShowUI.call(this);var aK=this.GetPM(),aN=aK.Get(Z.get("SWE_VIS_MODE_LIST")),ay=aK.Get(Z.get("SWE_LDC_VIS_MODE_LIST")),aG=aN?aN.length:0,aC=ay?ay.length:0,aw=aK.Get("GetFullId"),aH=aK.Get("GetPlaceholder"),aA,au,aF=aK.Get(Z.get("SWE_VIS_MODE_DEFAULT")),aL="<div align='center' id = 's_div_"+aH+"_VisualModes' class = 'siebui-viz-buttonbar AppletButtons'>";aK.AddProperty("IsTaggedApplet",ac.test(aK.Get("GetName")));al.call(this);var aO=$("#s_"+aw+"_div");aO.addClass(" siebui-applet siebui-form ");aO.find(".AppletTitle").eq(0).removeClass("AppletTitle").addClass(" siebui-applet-title ");if(aO.find("table[data-siebel-form-table='true']").length>0){this.SetIsGridBaseForm(true);aK.SetProperty("GridFormContent",true)}if(at.IsTrue(SiebelApp.S_App.GetAccessibilityEnhanced())){aO.attr({role:"region",title:aK.Get("LandMarkTitle")})}var aI=aK.Get("GetControls");for(var aD in aI){if(aI.hasOwnProperty(aD)){this.ShowUIControl(aI[aD])}}aI=null;this.InjectAppletQTPInfo(aO);this.ShowCollapseExpand();if(aG>0&&aC>0&&aG===aC){var ax=aK.Get("GetAppletLabel");if(ax!==""){ax+=":"}for(var aJ=0;aJ<aG;aJ++){var aE=aN[aJ];var az=ay[aJ];var aB=ax+az;if(aE!==aF){au="siebui-ctrl-btn appletButton"}else{au="siebui-ctrl-btn appletButtonDis"}if($("#"+aH+"_"+aE+"_btn").length===0){aA='<button id="'+aH+"_"+aE+"_btn\" class='"+au+"' aria-label='"+aB+"' "+((au==="siebui-ctrl-btn appletButton")?" ":' disabled="disabled" ')+'type="button" title="'+aB+'" ';if(at.IsTrue(SiebelApp.S_App.IsAutoOn())){aA+=consts.get("SWE_PROP_QTP_OT")+"='"+consts.get("SWE_PST_BUTTON_CTRL")+"' "+consts.get("SWE_PROP_QTP_RN")+"='"+aE+"' "+consts.get("SWE_PROP_QTP_UN")+"='"+az+"'"}aA+=">"+az+"</button>";aL+='<div align="center" id = "s_div_'+aH+"_"+aE+"\" class='siebui-viz-button-"+aE.toLowerCase()+"' >"+aA+"</div>"}}if(aA){aL+="</div>";var aM=aO.find(".siebui-vismode-buttonbar").eq(0);if(aM.length>0){aM.empty();aM.append(aL)}else{var av=SiebelApp.S_App.IsRwd()?$("#"+aK.Get("GetRowCount")):$("#s_"+aK.Get("GetId")+"_rc");if(av.parent().prev("td").length){av.parent().prev("td").append(aL)}else{av.parent().prepend(aL)}av=null}aM=null}}if(this.GetIsGridBaseForm()===true){ak.call(this,aO)}else{$("#SWEBottomHidden"+aK.Get("GetId")).attr("tabindex","-1")}SiebelAppFacade.LegacyCssSupport.addLegacyClass($("#"+aw));aO.find("span >img:first-child").each(function(){var aP=$(this),aQ=aP.attr("alt")||aP.attr("title");aQ?aP.parent().attr("title",aQ):false});aO=null};function ak(ax){if(ax&&ax.length){var az="#SWEBottomHidden"+this.GetPM().Get("GetId"),ay=ax.find("[tabindex]").not(az);for(var av=0,au=ay.length;av<au;av++){var aw=ay.eq(av);if(Number(aw.attr("tabindex"))>=0){aw.attr({"data-seq":aw.attr("tabindex"),tabindex:"0"})}}ax.on("keydown","input[type=file][data-seq], button[data-seq], input[type=button][data-seq],div[data-seq],span[data-seq],a[data-seq]",{ctx:this},function(aA){C.call(aA.data.ctx,aA.target,null,aA)});ax=ay=null}}F.prototype.ShowUIControl=function(aB){var ax=this.GetPM(),ay=ax.ExecuteMethod("IsRequired",aB.GetName()),aG=aB.GetUIType(),aI=false,aC=null;aC=this.GetUIWrapper(aB);aC.ShowUI();if(ax.Get("IsInQueryMode")){aC.BeginQuery()}aI=(aG===aa||aG===w||aC.constructor.name==="BasePW");if(aI||ay){var aE=arguments[1]?arguments[1]:aB.GetInputName();var aD=(this.GetIsGridBaseForm()===true)?aB.GetSeq():0;var aA=$('[name="'+aE+'"]')[0]||$("#"+aE)[0];if(!aA){return}aA=$(aA)}if(ay){var aF=aA.attr("aria-labelledby")||"";if(aF){var az=SiebelApp.S_App.GetRequiredIndicator();var aH=aF.replace("/","\\/");var av=ax.Get("GetFullId");$("#"+av).children().find("#"+aH).parent().append(az);aA.attr("aria-required","true");az=aH=av=null}aF=null}switch(aB.GetUIType()){case aa:if(aB.GetName()==="BookmarkImage"&&ax.GetPMName()==="Bookmark URL Popup Applet (SWE)_PM"){aA.remove();$($("table.FormSection")[0]).remove()}break;case w:aA.text("");var aw=aA.next("textarea");if(aw.length>0){aw.height(aB.GetHeight()).width(aB.GetWidth()).attr("name",aB.GetInputName()).attr("aria-labelledby",(aB.GetFieldName().replace(/\s+/g,"")+"_Label")).attr("aria-label",aB.GetDisplayName()).attr("maxlength",aB.GetMaxSize()||256).attr("tabindex",aD).addClass("siebui-align-"+aB.GetJustification());this.InjectAppletQTPInfo(aw)}var au=aA.siblings(".siebui-email-rtc-stripbtn").find("img.siebui-email-rtc-stripbtn-img");if(au.length>0){var aJ=SiebelApp.S_App.LocaleObject.GetLocalString("RTCStripHTML");au.attr("alt",aJ).attr("title",aJ)}break;default:if(aC.constructor.name==="BasePW"){aA.attr("maxlength",aB.GetMaxSize()||256).attr("tabindex",aD).addClass("siebui-align-"+aB.GetJustification());this.InjectQTPInfo(aA,aB)}break}aC=aA=null};function K(av){var au=arguments[1]?arguments[1]:av.GetInputName();if($("#"+au+"_mb").length>0){return}return'<a  id ="'+au+'_mb" tabindex ="'+av.GetSeq()+'" href="javascript:void(0)" >'+av.GetDisplayName()+"</a>"}F.prototype.ShowCollapseExpand=function(){var aw=this.GetPM();var az=aw.Get("defaultAppletDisplayMode");if(az){var ax=aw.Get("GetAppletLabel");if(ax!==""){ax=ax+":"}var aB;var av=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_APPLET_EXPAND");var ay=ax+av;var au=at.IsTrue(SiebelApp.S_App.IsAutoOn());var aA="#s_"+aw.Get("GetFullId")+"_div";aB="<span class='siebui-button-secondary siebui-btn-icon-expanded'><a href='javascript:void()' role='link' tabindex='0' aria-label='"+ay+"' ";if(au){aB+=consts.get("SWE_PROP_QTP_OT")+"='"+consts.get("SWE_CTRL_LINK")+"' "+consts.get("SWE_PROP_QTP_RN")+"='"+av+"' "+consts.get("SWE_PROP_QTP_UN")+"='"+av+"'"}aB+="></a></span>";ay="";av=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_APPLET_COLLAPSE");
ay=ax+av;aB+="<span class='siebui-button-secondary siebui-btn-icon-collapsed'><a href='javascript:void()' role='link' tabindex='0' aria-label='"+ay+"' ";if(au){aB+=consts.get("SWE_PROP_QTP_OT")+"='"+consts.get("SWE_CTRL_LINK")+"' "+consts.get("SWE_PROP_QTP_RN")+"='"+av+"' "+consts.get("SWE_PROP_QTP_UN")+"='"+av+"'"}aB+="></a></span>";$(aA).find(".siebui-applet-container.siebui-collapsible").prepend(aB).find(".siebui-btn-icon-"+az).hide();if(az==="collapsed"){$(aA).find(".siebui-applet-content.siebui-collapsible").hide()}}};F.prototype.BindEvents=function(aE,aA){SiebelAppFacade.PhysicalRenderer.superclass.BindEvents.call(this);var av=this.GetPM(),ay=av.Get(Z.get("SWE_VIS_MODE_LIST")),au=ay?ay.length:0,aB=av.Get("GetFullId"),aH="",aD=av.Get("GetPlaceholder");if(au>0){for(var ax=0;ax<au;ax++){if($("#"+aD+"_"+ay[ax]+"_btn").length>0){$("#"+aD+"_"+ay[ax]+"_btn").bind("click",{ctx:this,visMode:ay[ax]},function(aN){var aJ=aN.data.ctx,aL=aJ.GetPM(),aI=CCFMiscUtil_CreatePropSet(),aK={};aK.async=true;var aM=this;aK.cb=function(){var aO=Array.prototype.slice.call(arguments);var aP=aO?aO[aO.length-1]:"";if(aP===true){aL.SetProperty("DefaultVisualMode",aN.data.visMode);$(aM).attr("disabled","disabled");$(aM).removeClass("siebui-ctrl-btn appletButton siebui-mode-button-enable");$(aM).addClass("siebui-ctrl-btn appletButtonDis siebui-mode-button-disable")}};aI.SetProperty("VisualMode",aN.data.visMode);aL.OnControlEvent(Z.get("PHYEVENT_INVOKE_CONTROL"),aL.Get(Z.get("SWE_VIS_MODE_FLIP_METHOD")),aI,aK)})}}}if(this.constructor==F){var aF=$("#SWEBottomHidden"+av.Get("GetId"));aF.bind("focus",{ctx:this},function(aI){G.call(aI.data.ctx,aI)});aF=null}var az=$("#s_"+av.Get("GetFullId")+"_div");az.on("click",".siebui-applet-header.siebui-collapsible .siebui-button-secondary",{ctx:this},function(aI){$(this).parents(".siebui-applet-header.siebui-collapsible").find(".siebui-button-secondary").toggle().parents(".siebui-applet:first").find(".siebui-applet-content.siebui-collapsible").slideToggle("fast","linear");(aI.data.ctx.resize||$.noop).call(aI.data.ctx)});az.bind("click",{ctx:this},function(aJ){if(SiebelApp.S_App.GetPopupPM().Get("state")===consts.get("POPUP_STATE_VISIBLE")&&$(aJ.currentTarget).find("div[id^='s_S_A'][id$='_div']").find($(aJ.target)).length>0){return}var aI=aJ.data.ctx;if(aI.IsValidClick(aJ.srcElement||aJ.target)){if(aI&&aI.GetPM()){if(!aI.GetPM().Get("IsActive")){aI.GetPM().OnControlEvent(Z.get("PHYEVENT_APPLET_FOCUS"))}m.call(aI,aJ)}}});$("#_sweview #s_"+av.Get("GetFullId")+"_div").on("click",".siebui-task-assist-list-item",{ctx:this},function(aL){var aK=this.id;var aM=SiebelApp.S_App.getExtObject("TaskAssistant");if(aM){aM.ExecuteMethod("LaunchTaskFromView",aK)}else{var aI=SiebelApp.S_App.GetService(consts.get("NAME_TASKASSISTUISVC"));if(aI){var aJ=CCFMiscUtil_CreatePropSet();aJ.SetProperty("Task Id",aK);aI.InvokeMethod("LaunchTaskFromView",aJ)}}});az.on("click.drilldown",".siebui-ctrl-drilldown",{ctx:this},function(aL){var aI=aL.data.ctx.GetPM().Get("GetControls");var aJ=this.id.indexOf("_mb");var aK=this.id.substring(0,aJ);for(var aN in aI){if(aI.hasOwnProperty(aN)){var aM=aI[aN];if(aM.GetInputName()===aK){aL.data.ctx.GetPM().OnControlEvent(Z.get("PHYEVENT_DRILLDOWN_FORM"),aM)}}}});var aC=av.ExecuteMethod("GetControlId");if(aC){aC=((SiebelApp.S_App.IsRwd())&&(at.IsTrue(av.Get("IsObjResponsive"))))?"#"+aC:"[name="+aC+"]";$(aC).bind("change",{ctx:this},function(aI){aI.data.ctx.GetPM().OnControlEvent(Z.get("PHYEVENT_INVOKE_TOGGLE"),$(this).val())})}az=null;if(aA===true){return}var aG=aE||av.Get("GetControls");for(var aw in aG){if(aG.hasOwnProperty(aw)){this.BindControlEvents(aG[aw])}}aG=null};F.prototype.InvokeControlMethod=function(ax){SiebelApp.S_App.uiStatus.Busy({});var av={};av.async=true;av.cb=function(){var ay=Array.prototype.slice.call(arguments);var az=ay?ay[ay.length-1]:"";if(az!==Z.get("SWE_RPC_PROP_NEW_LAYOUT")&&az!==Z.get("SWE_RPC_PROP_REFRESH_LAYOUT")&&az!==Z.get("SWE_RPC_PROP_NEW_PAGE")){SiebelApp.S_App.uiStatus.Free()}};var aw=ax.GetMethodPropSet();var au=aw.Clone();this.GetPM().OnControlEvent(Z.get("PHYEVENT_INVOKE_CONTROL"),ax.GetMethodName(),au,av)};F.prototype.IsValidClick=function(au){return((at.IndexOf(["input","textarea","button","a","img"],au.tagName.toLowerCase())===-1)||(au.type||"").toLowerCase()==="file")};F.prototype.FormatDDInQueryMode=function(aw,av){if(this.GetPM().Get("IsInQueryMode")){var au=this.GetPM().Get("DDUserSelected");if(au&&av&&av.charAt(0)!=='"'&&av.charAt(av.length-1)!=='"'&&au.ctrl===aw&&au.value===av){av='"'+av+'"';this.GetPM().SetProperty("DDUserSelected",undefined)}}return av};F.prototype.BindControlEvents=function(ax){switch(ax.GetUIType()){case ad:if(ax.GetMethodName()==="ClearSignature"){break}case ar:case r:case V:case am:case ah:case aa:case l:case ai:case M:case e:case ag:case O:case a:case T:case A:case ae:case S:case g:case B:case aq:case y:case aj:this.GetUIWrapper(ax).BindEvents();return;case Y:this.GetUIWrapper(ax).BindEvents(true);return}var ay=$("[name="+ax.GetInputName()+"]");var aw=this.GetPM();if(ay.length===0&&ax.GetControlType()===t&&at.IndexOf([c,ab,L],aw.Get("GetMode"))!==-1){var au=ax.GetSpanPrefix()+"0";ay=$("[name="+au+"]")}if(ay.length===0&&$("#"+ax.GetInputName()).length===0&&$("#"+(ax.GetInputName()+"_Ctrl")).length===0){return}switch(ax.GetUIType()){case ad:if(ax.GetMethodName()==="ClearSignature"){$("#"+(ax.GetInputName()+"_Ctrl")).bind("click",{ctx:this,ctrl:ax},function(az){var aC=az.data.ctx.GetPM().Get("GetControls");for(var aA in aC){if(aC.hasOwnProperty(aA)){if(aC[aA].GetUIType()==="JInkData"){var aB=aC[aA].GetInputName();$("#siebui-ctrl"+aB+"-clearButton").trigger("click");$("#"+aB).attr({value:""});$($("#sign_"+aB).find("canvas")).trigger("mouseup")}}}})}break;case w:var av=ay.siblings(".siebui-email-rtc-stripbtn").find(".siebui-email-rtc-stripbtn-link");if(av.length>0){av.bind("click",function(){var aA=SiebelApp.S_App.LocaleObject.GetLocalString("RTCStripHtmlConfirm");var az=confirm(aA);if(az==true){var aB=$("textarea[name='"+ax.GetInputName()+"']");aB.val(SiebelApp.Utils.stripOUIHTMLTag(aB.val()));aB.focus()}})}default:ay.bind("keydown",{ctx:this,ctrl:ax},function(az){return az.data.ctx.HandleKeyEvents($(this),az,$(this).val())});ay.bind("blur",{ctx:this,ctrl:ax},function(az){D.call(az.data.ctx,az.data.ctrl,this,false);var aA=az.data.ctx.GetPM().OnControlEvent(Z.get("PHYEVENT_CONTROL_BLUR"),az.data.ctrl,$(this).val());D.call(az.data.ctx,az.data.ctrl,this,true)});ay.bind("focus",{ctx:this,ctrl:ax},function(az){D.call(az.data.ctx,az.data.ctrl,this,false);az.data.ctx.GetPM().OnControlEvent(Z.get("PHYEVENT_CONTROL_FOCUS"),az.data.ctrl,$(this).val())});break}ay=null};F.prototype.HandleKeyEvents=function(aw,ax,az){var au=false;var av=this.GetPM();if(aw&&aw.length===1&&ax){var ay=ax.data.ctrl;if(ay){switch(ax.which){case $.ui.keyCode.ENTER:au=X.call(this,aw,ay,ax);break;case $.ui.keyCode.ESCAPE:au=H.call(this,aw,ay,ax);break;case $.ui.keyCode.UP:au=E.call(this,aw,ay,ax);break;case $.ui.keyCode.DOWN:au=R.call(this,aw,ay,ax);
break;case $.ui.keyCode.LEFT:case $.ui.keyCode.RIGHT:au=k.call(this,aw,ay,ax);break;case $.ui.keyCode.BACKSPACE:au=af.call(this,aw,ay,ax);if(au){ax.preventDefault()}break;case $.ui.keyCode.TAB:au=C.call(this,aw,ay,ax);break;case Z.get("SWE_F2_KEY"):au=h.call(this,aw,ay,ax);break;default:s.call(this,aw,ay,ax);break}}}if(au){ax.stopImmediatePropagation()}};function E(au,ax,av){var aw=this.GetUIWrapper(ax).HandleKey(au,av);return(aw===true)}function R(au,ax,av){var aw=this.GetUIWrapper(ax).HandleKey(au,av);return(aw===true)}function s(av,ax,aw){var au=aw.ctrlKey||aw.altKey||aw.shiftKey;if(ax.GetUIType()==r&&!au&&av.autocomplete("option","source").length==0){this.GetUIWrapper(ax).HandleKey(av,aw)}}function k(av,ax,aw){var au=false;if(aw.altKey){au=H.call(this,av,ax,aw)}return au}function X(aw,ay,ax){var au=false,av=this.GetPM();switch(ay.GetUIType()){case a:case aa:case aj:case B:case w:case f:case U:case u:case ad:au=true;break;case aa:au=av.Get("IsInQueryMode")?false:true;break;case A:ax.preventDefault();break;case r:j.call(this,aw,ay,ax);break}if(ay.GetUIType()===y||(ay.GetUIType()==r&&aw.attr("autocomplete"))){this.GetUIWrapper(ay).HandleKey(aw,ax)}return au?au:av.OnControlEvent(Z.get("PHYEVENT_ENTER_KEY_PRESS"),ay)}function H(av,ax,aw){var au=this.GetPM();preState=au.Get("isControlPopupOpen");au.OnControlEvent(Z.get("PHYEVENT_ESCAPE_KEY_PRESS"),ax);return(au.Get("isControlPopupOpen")!==preState)}function af(au,aw,av){if(au.attr("type")==="checkbox"){return true}return !(this.GetPM().ExecuteMethod("CanUpdate",aw.GetName()))}function h(au,aw,av){if(!av.data.readOnly){$(au).nextAll("span[id$='_icon']").click();return true}return false}function j(av,aw,au){if(aw&&aw.GetUIType()==r&&av.attr("autocomplete")){if(av.autocomplete("widget").not(":hidden").length>0){av.val(av.autocomplete("widget").find(".ui-state-focus").text())}}}function C(au,az,aA){if(aA.keyCode===$.ui.keyCode.TAB){m.call(this,aA,az);j.call(this,au,az,aA);var ax=$("#s_"+this.GetPM().Get("GetFullId")+"_div"),aC=ax.find("[data-seq]").not(":hidden,:disabled"),aL=aC.index($(au)),aB=Number($(au).attr("data-seq"));if((aL===-1)||(aA.shiftKey&&aL===0)){return}var aK=null,aH=aA.shiftKey?aL-1:aL+1,aw=aA.shiftKey?0:aC.length,aI=aA.shiftKey?-1:1,aG=aH;if(aB==0){while(true){if(Number(aC.eq(aG).attr("data-seq"))===0){aK=aG;break}if(aG===aw){break}aG+=aI}}if(aK===null){var aJ=null,ay=null,aF=function(aN,aM){return aN>aM},aE=function(aN,aM){return aN<aM},av=aA.shiftKey?aE:aF;for(aG=0,len=aC.length;aG<len;aG++){if(aG!==aL){var aD=Number(aC.eq(aG).attr("data-seq"));if((!aJ&&av(aD,aB))||aJ&&av(aD,aB)&&av(aJ,aD)){aJ=aD;ay=aG}}}if(ay){aK=ay}}if(aK!==null){aC.eq(aK).focus();aA.preventDefault()}else{W.call(this,aA);aA.preventDefault()}}}function G(av){var az=$("#s_"+this.GetPM().Get("GetFullId")+"_div"),ay=az.find("[data-seq]").not(":hidden,:disabled"),au=ay.length,aB=-1,ax=-1;for(var aw=au;aw>=0;aw--){var aA=Number(ay.eq(aw).attr("data-seq"));if(aB<aA){aB=aA;ax=aw}}ay.eq(ax).focus()}function W(aw){var av=$(aw.target),ay="SWEBottomHidden"+this.GetPM().Get("GetId"),ax=$("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, *[tabindex], *[contenteditable]").not(":hidden").add("a#"+ay).not("[tabindex=-1]"),au=ax.length;lastindex=ax.index($("#"+ay));if((lastindex+1)===au){ax.eq(0).focus()}else{ax.eq(lastindex+1).focus()}}function p(){if(this.GetPM().Get("isControlPopupOpen")===false){var ay=this.GetPM().Get("GetActiveControl");if(ay){var ax=$($('input[name="'+ay.GetInputName()+'"]')[0]||$("#"+ay.GetInputName())[0]);switch(ay.GetUIType()){case r:ax.autocomplete("close");break;case M:case e:case ag:ax.datetimepicker("hide");break;case y:ax.calculator("hide");break;case g:var aw=$.data(this,"innerCtrlElem");if(aw&&aw.hasOwnProperty("calc")){var au=$(aw.calc);if(au&&au.size()>0){au.calculator("hide")}}else{if(aw.hasOwnProperty("date")){var av=$(aw.date);if(av&&av.size()>0){av.datetimepicker("hide")}}}break}}}}F.prototype.BindData=function(){SiebelAppFacade.PhysicalRenderer.superclass.BindData.call(this);this.ShowSelection()};F.prototype.ShowSelection=function(av){if(this.inProgress||av===true){return false}var aw=this.GetPM(),au=aw.Get("GetControls");for(var ax in au){if(au.hasOwnProperty(ax)){d.call(this,au[ax],av)}}};F.prototype.MaskLeaveField=function(au,ax){if(au){var aw=this.GetUIWrapper(au);if(aw){var av=aw.GetEl(this.GetPM().Get("GetSelection"));if(av&&av.length){if(ax){av.data("inLeaveField","true")}else{av.removeData("inLeaveField")}}}}};function d(aw,ay){var aE=!ay?0:ay,av=this.GetPM(),au=aw.GetName(),ax=aw.GetFieldName(),aD=av.Get("IsInQueryMode"),aA=av.Get("IsPure"),az=av.ExecuteMethod("IsPrivateField",au);if((!at.IsEmpty(ax)||az||!aA)&&aw.GetUIType()!==ad){var aC="";if(aD||az||!aA){aC=$("[name='"+aw.GetInputName()+"']").val()||"";if((au===Z.get("SWE_QUERY_COMBO_BOX")||au===Z.get("SWE_QUERY_SEARCH_SPEC")||au===Z.get("SWE_POPUP_QUERY_COMBO_BOX")||au===Z.get("SWE_POPUP_QUERY_SEARCH_SPEC"))&&aC){av.ExecuteMethod("LeaveField",aw,aC,true);return}else{if((aD&&az)||!aD||!aA){if(ay===undefined||ay===null){aC=av.ExecuteMethod("GetFormattedFieldValue",aw,false)}else{aC=av.ExecuteMethod("GetFormattedFieldValue",aw,true,aE)}}else{var aB=av.Get("GetRecordSet");if(at.IsEmpty(aB[aE][ax])){aC=""}else{aC=aB[aE][ax]}}}}else{if(ay===undefined||ay===null){aC=av.ExecuteMethod("GetFormattedFieldValue",aw,true)}else{aC=av.ExecuteMethod("GetFormattedFieldValue",aw,true,aE)}}if(ay===undefined||ay===null){this.EnableControl(aw,av.ExecuteMethod("CanUpdate",au));this.SetControlValue(aw,aC)}else{this.EnableControl(aw,av.ExecuteMethod("CanUpdate",au),aE);this.SetControlValue(aw,aC,aE)}}}F.prototype.IconMapFormatter=function(ay,aE,az){var au="";var aD=SiebelApp.S_App.GetIconMap();var aw=aD[SiebelApp.S_App.LookupStringCache(ay.GetIconMap())];if(aw){var aC=aw.length;for(var aA=0;aA<aC;aA++){var ax=aw[aA];var aF=$(ax.iconImage),av=ay.GetDisplayName();if(av){var aB=aF.attr("alt");aF.attr("alt",(aB?(av+":"+aB):aB));aB=aF.attr("title");aF.attr("title",(aB?(av+":"+aB):aB));aF=aF[0].outerHTML}else{aF=ax.iconImage}if(!at.IsEmpty(aE)&&ax.iconName==aE){return aF}if(ax.iconName=="Default"){au=aF}}if(!at.IsEmpty(au)){return au}}return""};F.prototype.ControlHtmlFormatter=function(av,aw,au,ay,ax,az){if(au){if(av.next("."+aw).length===1){av.next("."+aw).html(au)}else{av.after("<span class='"+aw+"'>"+au+"</span>")}av.next("."+aw).toggle(az.GetScriptProperty("Visible"))}else{av.next("."+aw).hide()}if(ay||(!ay&&at.IsEmpty(ax))){av.val(ax).toggle(az.GetScriptProperty("Visible"))}else{av.hide()}};F.prototype.SetControlValue=function(ax,aB,aA){var az=(aA===undefined||aA===null)?this.GetPM().Get("GetSelection"):aA;switch(ax.GetUIType()){case aa:case aq:case w:break;default:this.GetUIWrapper(ax).SetValue(aB,az);return}var aC=!aA?0:aA;var aw=this.GetPM();var ay=$("#"+ax.GetInputName())[aC]||$("[name="+ax.GetInputName()+"]")[aC];if(!ay){return}ay=$(ay);switch(ax.GetUIType()){case aa:if(ax.GetName()==="BookmarkURL"&&this.GetPM().GetPMName()==="Bookmark URL Popup Applet (SWE)_PM"){var av=ay.replaceWith('<textarea name="'+ax.GetInputName()+'" class="siebui-bookmark-textarea" readonly="readonly" rows="3" cols="150" value=\''+aB+"'>"+aB+"</textarea>")
}else{this.GetUIWrapper(ax).SetValue(aB,az)}break;case aq:this.GetUIWrapper(ax,true).SetValue(aB,az);break;case w:var au=ay.next("textarea");if(au.length>0){at.IsEmpty(aB)?au.val(""):au.val(aB)}break}ay=null};function z(av,aw,au,az){var ay=az.GetScriptProperty("Visible");if(av){var ax=aw.nextAll("div#"+aw.attr("name")+"_IPEField").text();aw.nextAll("div#"+aw.attr("name")+"_IPEField").hide();aw.nextAll("img#"+aw.attr("name")+"_icon").toggle(ay);aw.toggle(ay);aw.val(ax)}else{var ax=aw.val();aw.nextAll("div#"+aw.attr("name")+"_IPEField").toggle(ay);aw.nextAll("img#"+aw.attr("name")+"_icon").hide();aw.hide();aw.nextAll("div#"+aw.attr("name")+"_IPEField").children().val(ax)}if(au!==true){aw.focus()}}function P(au){var aw=this.GetPM(),av=aw.Get("GetControls"),ay;for(var ax in av){if(av[ax].GetInputName()===au){ay=av[ax];break}}av=null;return ay}function m(au,ay){if(this.GetPM()){var aw=this.GetPM(),av;var ax=$("#s_"+this.GetPM().Get("GetFullId")+"_div").find("div[id$='_IPEField']").filter(":hidden");var az=ax.prevAll("input.siebui-input-popup").eq(0);if((ax.length&&au&&au.keyCode===$.ui.keyCode.TAB)||(az.length&&document.activeElement!==az[0])){av=SiebelApp.S_App.LookupStringCache(az.GetName());ay=ay||P.call(this,av);z.call(this,false,az,true,ay)}}}F.prototype.EnableControl=function(aA,az,aw){var ay,au,av;if(!n(aA)){return}var aB=(aw===undefined||aw===null)?this.GetPM().Get("GetSelection"):aw;aw=!aw?0:aw;switch(aA.GetUIType()){case am:case V:case M:case r:case O:case a:case T:case ae:case A:case g:case ah:case aa:case ai:case B:this.GetUIWrapper(aA).SetState(Z.get("EDITABLE"),az,aB);return;case l:case ad:this.GetUIWrapper(aA).SetState(Z.get("ENABLE"),az,aB);return}if(aA.GetUIType()==w){ay=$("[name="+aA.GetInputName()+"]");if(ay.length>0){ay.attr("readOnly",!az).attr("aria-readonly",!az);var ax=ay.siblings(".siebui-email-rtc-stripbtn");if(ax.length>0){az?$(ax).toggle(aA.GetScriptProperty("Visible")):$(ax).hide()}}}else{ay=$("#"+aA.GetInputName())[aw]||$("[name="+aA.GetInputName()+"]")[aw];$(ay).removeAttr("readOnly").attr("readOnly",!az).attr("aria-readonly",!az)}};F.prototype.UpdateUIControls=function(au){var au=this.GetPM().Get("GetControls");for(var aw in au){if(au.hasOwnProperty(aw)){var av=au[aw];var ax=av.GetFieldName();if(!at.IsEmpty(ax)){this.EnableControl(av,this.GetPM().ExecuteMethod("CanUpdate",av.GetName()))}}}};F.prototype.UpdateUIButtons=function(){var au=this.GetPM().Get("GetControls");for(var aw in au){if(au.hasOwnProperty(aw)){var av=au[aw];if(av.GetUIType()===ad||av.GetUIType()===l){var ax=this.GetPM().ExecuteMethod("CanInvokeMethod",av.GetMethodName());this.EnableControl(av,ax)}}}};F.prototype.FocusFirstControl=function(){var av=this.GetPM().Get("GetControls");var au=9999;this.SetFirstControl(null);for(var ay in av){if(av.hasOwnProperty(ay)){var ax=av[ay];var az=ax.GetFieldName();if(!at.IsEmpty(az)){if(ax.GetIndex()&&ax.GetIndex()<au){var aw=false;if(this.GetPM().Get("IsInQueryMode")===false){aw=this.GetPM().ExecuteMethod("CanUpdate",ay)}else{aw=true}if(aw&&!at.IsEmpty(ax.GetUIType())&&(ax.isBasicControl()||ax.GetUIType()[0]==="J"||ax.GetUIType()===ae||ax.GetUIType()===A)){au=ax.GetIndex();this.SetFirstControl($("#"+ax.GetInputName())[0]||$("[name="+ax.GetInputName()+"]")[0]);break}}}}}if(this.GetFirstControl()!=null){$(this.GetFirstControl()).focus();return}this.FocusFirstNonEditableControl()};F.prototype.FocusFirstNonEditableControl=function(){var av=this.GetPM().Get("GetControls");var au=9999;var az;for(var ay in av){if(av.hasOwnProperty(ay)){var ax=av[ay],aw=ax.GetUIType();controlInputName=ax.GetInputName();if(ax.GetIndex()<au&&(!at.IsEmpty(aw)&&aw!=="Button"&&aw!=="Label")){this.SetFirstControl($("#"+controlInputName)[0]||$("[name="+controlInputName+"]")[0]);break}}}az=this.GetFirstControl();if(az&&$(az).length>0){$(az).focus();if(!$(az).is(":focusable")&&$(az).children().eq(0).is(":focusable")){$(az).children().eq(0).focus()}}};F.prototype.SetFocusToControl=function(aw,av){var au=this.GetPM().Get("GetControls");var ax=null;var ay=au[aw],az=this.GetPM().Get("GetSelection");if(ay){if(!at.IsEmpty(ay.GetMethodName())){ax=$("#"+(ay.GetInputName()+"_Ctrl"));av?$(ax).focus():$(ax).blur()}else{this.GetUIWrapper(ay).SetState(Z.get("FOCUS"),av,az)}return true}};function Q(av,aw){var au=$("#s_"+this.GetPM().Get("GetFullId")+"_div");if(av){au.addClass("Selected siebui-active").removeClass("NotSelected siebui-nonactive")}else{au.removeClass("Selected siebui-active").addClass("NotSelected siebui-nonactive")}}function b(au){au=(typeof au==="undefined")?false:au;var av=$("#s_"+this.GetPM().Get("GetFullId")+"_div"),aw=null;if(au){av.addClass("siebui-active-el").data("accessible-el",true)}else{aw=av.find("#a_"+this.GetPM().Get("GetId"));if(aw.length&&av.data("accessible-el")){av.removeData("accessible-el").removeAttr("tabindex")}av=aw.length?aw:av}av.attr("tabindex",0).focus();av=aw=null}function n(au){return(typeof(au.GetInputName)==="function")}F.prototype.InjectQTPInfo=function(av,au){if((av.length!=0)&&(au!=undefined)){if(typeof(au.GetObjectType)=="function"&&!(av).attr("ot")){$(av).attr("ot",au.GetObjectType())}if(typeof(au.GetRepstrName)=="function"&&!(av).attr("rn")){$(av).attr("rn",au.GetRepstrName())}if(typeof(au.GetUIName)=="function"&&!(av).attr("un")){$(av).attr("un",au.GetUIName())}}};F.prototype.InjectAppletQTPInfo=function(av){var au=this.GetPM();if((av.length!=0)&&au){if(typeof(au.Get("GetObjectType"))==="string"){$(av).attr("ot",au.Get("GetObjectType"))}if(typeof(au.Get("GetRepstrName"))==="string"){$(av).attr("rn",au.Get("GetRepstrName"))}if(typeof(au.Get("GetUIName"))==="string"){$(av).attr("un",au.Get("GetUIName"))}}};F.prototype.ShowPopup=function(au){this.GetUIWrapper(au).OpenPopup()};F.prototype.GetPhysicalControlValue=function(ay){var ax,aw,av=this.GetPM(),az=av.Get("GetSelection");if(ay){av.AddProperty("PhysicalCtrlVal",aw);ax=$("[name='"+ay.GetInputName()+"']");aw=this.GetUIWrapper(ay).GetValue(az)||"";if(av.Get("IsInQueryMode")&&ay.GetCaseSensitive()&&(aw===SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK"))){aw=""}var au=ay.GetUIType();switch(au){case M:case e:case ag:if(av.Get("IsInQueryMode")===false){aw=at.ToISOFormat(at.Trim(aw),(au!==M),ay.GetDisplayFormat())||aw}break;case am:aw=ax.filter(":checked").val()||"";break;case r:if(!ax.data("iscache")){aw=this.FormatDDInQueryMode(ay,aw)}else{aw=av.ExecuteMethod("GetFormattedFieldValue",ay)}break}av.AddProperty("PhysicalCtrlVal",aw)}};function i(){var aw=this.GetPM();var au=aw.Get("GetControls");var ay=aw.Get("IsInQueryMode");var av=null;aw.ExecuteMethod("SetUpdateConditionals",false);for(var aB in au){if(au.hasOwnProperty(aB)){var aA=au[aB];var az=aA.GetMethodName();var ax=aA.GetScriptProperty("Visible");if((aB===Z.get("SWE_POPUP_QUERY_COMBO_BOX"))||aB===Z.get("SWE_POPUP_QUERY_SEARCH_SPEC")||aB===Z.get("SWE_POPUP_QUERY_EXECUTE")||aB===Z.get("SWE_QUERY_COMBO_BOX")||aB===Z.get("SWE_QUERY_SEARCH_SPEC")){av=$("#"+(aA.GetInputName()+"_Ctrl"))[0]||$("#"+aA.GetInputName())[0];if($(av).length===0&&at.IsEmpty(aA.GetFieldName())){av=$('[name="'+aA.GetInputName()+'"]')[0]
}av=$(av);if(ay){av.attr("disabled","disabled");if(aB==="PopupQueryExecute"){if(av.hasClass("appletButton")){av.removeClass("appletButton")}av.addClass("appletButtonDis")}}else{if(av.attr("disabled")){av.removeAttr("disabled");if(aB==="disabled"){if(av.hasClass("appletButtonDis")){av.removeClass("appletButtonDis")}av.addClass("appletButton")}}}continue}if(aA.GetUIType()&&aA.GetUIType()[0]=="J"){continue}av=$("#"+(aA.GetInputName()+"_Ctrl"))[0]||$("#"+aA.GetInputName())[0];if(!av&&at.IsEmpty(aA.GetFieldName())){av=$('[name="'+aA.GetInputName()+'"]')[0]}av=$(av);if(aB==="QueryAssistant"){if(ay){if(av.attr("disabled")){av.removeAttr("disabled");if(av.hasClass("appletButtonDis")){av.removeClass("appletButtonDis")}av.addClass("appletButton")}}else{av.attr("disabled","disabled");if(av.hasClass("appletButton")){av.removeClass("appletButton")}av.addClass("appletButtonDis")}}if((!ay&&at.IndexOf(["UndoQuery","ExecuteQuery","ShowQueryAssistant"],az)!==-1)||(ay&&at.IndexOf(["NewQuery","ToggleListRowCount"],az)!==-1)){$(av).styleHide()}else{if(!at.IsEmpty(az)&&aw.ExecuteMethod("CanInvokeMethod",az)){if((az!=="Drilldown")||!(av.nextAll("[id^='"+aA.GetInputName()+"']").is(":visible"))){if(SiebelApp.S_App.IsRwd()&&(at.IsTrue(aw.Get("IsObjResponsive")))&&at.IndexOf(["AddRecords","DeleteRecords","DeleteAllRecords"],az)!==-1){continue}at.DecideVisibility(av,ax)}}else{if(ay&&az&&at.IndexOf(["Find","AddRecords","AddAllRecords","DeleteRecords","DeleteAllRecords"],az)===-1){av.styleHide()}else{if(SiebelApp.S_App.IsRwd()&&(at.IsTrue(aw.Get("IsObjResponsive")))&&at.IndexOf(["Find","AddRecords","AddAllRecords","DeleteRecords","DeleteAllRecords"],az)===-1){continue}at.DecideVisibility(av,ax)}}}}}}function ao(){var au=this.GetPM().Get("GetControls");for(var av in au){if(au.hasOwnProperty(av)){this.GetUIWrapper(au[av]).BeginQuery()}}}function x(){var au=this.GetPM().Get("GetControls");for(var av in au){if(au.hasOwnProperty(av)){this.GetUIWrapper(au[av]).EndQuery()}}}function v(){var ax=this.GetPM();var av=ax.ExecuteMethod("GetWSStartRowNum");var ay=Number(ax.Get("GetRowListRowCount"));var az=(ay>1)?Z.get("SWE_ROW_COUNTER_LIST"):Z.get("SWE_ROW_COUNTER_FORM");var au=[];var aB;var aA;var aC;if(av===0){aB=Z.get("SWE_ROW_COUNTER_NO_RECORDS")}else{if(av>0){au.push(av);if(ay>1){au.push(Number(ax.Get("GetWSEndRowNum")))}au.push(Number(ax.Get("GetNumRows")));aB=az+(ax.Get("IsNumRowsKnown")?Z.get("SWE_ROW_COUNTER_TOTAL_KNOWN"):Z.get("SWE_ROW_COUNTER_TOTAL_UNKNOWN"))}else{if(av<0&&av>=-1*ay){if(ay>1){au.push(Number(-1*av))}aB=az+Z.get("SWE_ROW_COUNTER_LAST_RECORD")}else{au.push(Number((-1-av)));if(ay>1){au.push(Number(-1-Number(ax.Get("GetWSEndRowNum"))))}aB=az+Z.get("SWE_ROW_COUNTER_FROM_LAST")}}}aA=SiebelApp.S_App.GetRowCounterTemplateMap(aB);aC=at.FormatString(aA,au);var aw;if(SiebelApp.S_App.IsRwd()&&(at.IsTrue(ax.Get("IsObjResponsive")))){aw=$("#"+ax.Get("GetRowCount"))}else{aw=$("#s_"+ax.Get("GetId")+"_rc")}aw.addClass("siebui-row-counter").text(aC);if(at.IsTrue(SiebelApp.S_App.IsAutoOn())){aw.attr(consts.get("SWE_PROP_QTP_OT"),consts.get("SWE_CTRL_LABEL")).attr(consts.get("SWE_PROP_QTP_RN"),consts.get("SWE_ROW_COUNTER_NO_RECORDS")).attr(consts.get("SWE_PROP_QTP_UN"),aC)}}return F}());return"SiebelAppFacade.PhysicalRenderer"})}if(typeof(SiebelAppFacade.PopupRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.PopupRenderer");define("siebel/popuprenderer",["siebel/phyrenderer"],function(){SiebelAppFacade.PopupRenderer=(function(){var j=SiebelJS.Dependency("SiebelApp.Utils");var h=SiebelJS.Dependency("SiebelApp.Constants");var b=Number(h.get("DEFAULT_POPUP_WIDTH"));var g=Number(h.get("DEFAULT_POPUP_HEIGHT"));function c(n){SiebelAppFacade.PopupRenderer.superclass.constructor.call(this,n)}SiebelJS.Extend(c,SiebelAppFacade.BasePR);c.prototype.Init=function(){SiebelAppFacade.PopupRenderer.superclass.Init.call(this);this.AttachPMBinding("state",i);this.AttachPMBinding("url",d);this.AttachPMBinding("content",k);this.AttachPMBinding("OnLoadPopupContent",m);this.AttachPMBinding("OnLoadPopupContent",l);this.AttachPMBinding("StandAlonePopup",this.ProcessStandAlonePopup)};function d(){SiebelApp.S_App.uiStatus.Busy();SiebelApp.contentUpdater.AddCallBack(this.GetPM().Get("url"),function(){this.ExecuteMethod("OnLoadPopupContent")},this.GetPM());var n=$("[name=popup]");if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimePopupApplet("","Call GetLayout")}n.attr("src",this.GetPM().Get("url"));n=null;setTimeout(function(){SiebelApp.contentUpdater.loadContent(true)},1)}function k(){SiebelApp.S_App.uiStatus.Free();$("[name=popup]").children().remove();$("[name=popup]").addClass("minWidthContainer");$("[name=popup]").dialog("open");$("[name=popup]").html("");$("[name=popup]").append(this.GetPM().Get("content"))}function i(){var n=this.GetPM().Get("state");var w=this.GetPM().Get("isCurrencyOpen");var q=true;if(w){q=false}if(n==h.get("POPUP_STATE_HIDDEN")){$("[name=popup]").dialog("close");$("[name=popup]").parents(".ui-dialog").eq(0).removeClass("siebui-mvg-dialog");var o=$("div[name=popup]"),t=o.find("textarea"),x=t.length;for(var s=0;s<x;s++){var u=CKEDITOR.instances[$(t[s]).attr("name")];if(u){u.destroy(true)}}o.children().remove().end().dialog("option","buttons",{}).parent().find("div.ui-dialog-buttonset").empty();this.GetPM().SetProperty("isCurrencyOpen",false)}else{if(n==h.get("POPUP_STATE_VISIBLE")){$("div[name=popup]").data("InitDlg",true);setTimeout(function(){$("div[name=popup]").removeData("InitDlg")},2);$("div[name=popup]").dialog("open");$("div[name=popup]").parents("div.ui-dialog").children("div.ui-dialog-titlebar").show();$("div[name=popup]").dialog("option","height","auto").dialog("option","width","auto").dialog("option","resizable",q).dialog("option","minWidth",b).dialog("option","minHeight",g);$("div[name=popup]").dialog("option","position",{my:"center",at:"center",of:window});var r=this.GetPM();var p;var v;$(".ui-widget-overlay").droppable({drop:function(A,F){if(F.draggable&&(F.draggable.is("tr.jqgrow")||F.draggable.is(".siebui-tile"))){var z=F.draggable.attr("id");var G=false;if(z>0){var C=F.draggable.parent().parent().jqGrid("getRowData",z)}var I=$("#s_"+r.Get("baseParentAppletId")+"_div");if(I.length>0){var E=I.offset().top+I.height();var H=I.offset().left+I.width()}if((I.offset().left<A.originalEvent.clientX&&A.originalEvent.clientX<H)&&(I.offset().top<A.originalEvent.clientY&&A.originalEvent.clientY<E)){if(r.Get("isPopupPick")){p=r.Get("PickAppletObject");p.GetPModel().ExecuteMethod("SetSelectionOnDragNDrop",z);G=p.GetPModel().ExecuteMethod("HandleDragNDropInPopup","PickRecord")}if(r.Get("isPopupMVGAssoc")){v=r.Get("MVGAssocParentAppletObject");if(!r.Get("ismultislectmode")){v.GetPModel().ExecuteMethod("SetSelectionOnDragNDrop",z)}var D=v.GetPModel().ExecuteMethod("HandleDragNDropInPopup","AddRecords");if(D){G=v.GetPModel().ExecuteMethod("HandleDragNDropInPopup","CloseApplet")}}if(r.Get("isPopupAssoc")){var B=CCFMiscUtil_CreatePropSet();p=r.Get("AssocAppletObject");
if(!r.Get("ismultislectmode")){p.GetPModel().ExecuteMethod("SetSelectionOnDragNDrop",z)}G=p.GetPModel().ExecuteMethod("HandleDragNDropInPopup","AddRecord")}if(!G){F.draggable.animate(F.draggable.data().origPosition,"slow")}else{F.draggable.detach();r.SetProperty("isPopupPick",false);r.SetProperty("isPopupMVGAssoc",false);r.SetProperty("isPopupMVGSelected",false);r.SetProperty("isPopupAssoc",false)}}else{F.draggable.animate(F.draggable.data().origPosition,"slow")}r.SetProperty("ismultislectmode",false)}}});m.call(this);SiebelApp.S_App.uiStatus.LocalBusy({mask:true})}}}function a(o){var n=o.parent().width(),p=o.parent().height(),q={position:{my:"center",at:"center",of:window}};if(!$(".siebui-send-email").length){$.extend(q,{minWidth:n,minHeight:p,width:o.width()})}o.dialog("option",q)}function l(){var n=this,o=arguments;DOMUtils.Read(function(){DOMUtils.Write(function(){f.apply(n,o)})})}function f(){var n=Number(this.GetPM().Get("width"))||0;var o=false;var p=$("div[name=popup]");if(p.find("div.ui-jqgrid").length>0){if(n===b){n*=2}p.width(n);$(window).resize()}else{if(n<b){p.width(b)}else{o=true}}if(o){setTimeout(function(){var r=$("div[name=popup]"),q=r.width();if(r[0]&&r[0].scrollWidth>q&&r[0].scrollWidth<n){q=r[0].scrollWidth}r.width(q);a(r)},3)}else{a(p)}p=null}function m(){var p=$("[name='popup']");if(this.GetPM().Get("currPopups")&&this.GetPM().Get("currPopups")[0]){p.dialog("option","title",SiebelApp.S_App.LookupStringCache(this.GetPM().Get("currPopups")[0].GetTitle()));if(j.IsTrue(SiebelApp.S_App.IsAutoOn())){p.parent(".ui-dialog").find("span.ui-dialog-title").attr("ot","popup").attr("rn","popup").attr("un",this.GetPM().Get("currPopups")[0].GetUIName()+" popup")}}else{var n=p.find("[title-preserved]"),o=n&&n.length?n.attr("title-preserved"):"";p.dialog("option","title",HtmlDecode(o));if(!j.IsEmpty(o)){p.parents("div.ui-dialog").find(".ui-dialog-title").focus()}}}c.prototype.BindData=function(){SiebelAppFacade.PopupRenderer.superclass.BindData.call(this)};c.prototype.ShowUI=function(){SiebelAppFacade.PopupRenderer.superclass.ShowUI.call(this);if($("[name=popup]").length===0){var n=$('<div name="popup"></div>');var o=SiebelApp.S_App.GetDirection();SiebelApp.S_App.GetTargetViewContainer().append(n);SiebelApp.S_App.uiStatus.LocalBusy({target:"[name=popup]",mask:false});var p=$("div[name=popup]");p.dialog({position:"center",modal:true,autoOpen:false,closeOnEscape:false,resize:e});p.parent().find(".ui-dialog-titlebar-close").attr("title",SiebelApp.S_App.LocaleObject.GetLocalString("IDS_MSG_CLOSE"));p.parents("div.ui-dialog").children("div.ui-dialog-titlebar").removeAttr("role").children("span.ui-dialog-title").attr("tabindex","-1").addClass(o?"ui-dialog-title-rtl":"").next().addClass(o?"ui-dialog-titlebar-close-rtl":"").removeClass(o?"ui-dialog-titlebar-close":"")}};function e(o,r){if($(this).width()!==r.size.width){$(this).width("auto")}if(r.originalSize.height!==r.size.height&&$(this).find(".siebui-send-email").length){var q=$(this).siblings(".ui-dialog-titlebar").outerHeight()+$(this).height();var p=r.size.height-q;var n=$(this).find(".siebui-email-rtc-text textarea");if(n.length){n.width("");var t=n.height();n.height(t+p)}var s=CKEDITOR.instances[$(this).find(".siebui-email-body textarea").attr("name")];if(s){var t=$(this).find(".siebui-email-body .cke").height();s.resize("100%",t+p)}if(q>r.size.height&&(n.length||s)){$(this).parent().height(q)}}}c.prototype.BindEvents=function(){SiebelAppFacade.PopupRenderer.superclass.BindEvents.call(this);var n=$("[name=popup]");n.data("context",this);n.dialog({beforeClose:function(o,p){if(!$("div[name=popup]").data("InitDlg")){if($(o.currentTarget,"[class*=ui-dialog-titlebar-close]").length>0){if(j.Confirm(SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_POPUP_CLOSEBYX_WARNING"))){$("[name=popup]").data("context").GetPM().OnControlEvent("ClosePopupByX",o);return true}return false}}else{return false}}})};c.prototype.ProcessStandAlonePopup=function(q,n,p){p=p||"subWind";var o=window.open(q,p,n)};return c})();return SiebelAppFacade.PopupRenderer})};